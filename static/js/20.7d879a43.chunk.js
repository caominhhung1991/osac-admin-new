(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[20],{749:function(e,a,n){"use strict";var t=n(0),c=n.n(t),i=n(10),o=n(48),d=n(389),l=n(15);a.a=function(e){var a=e.form,n=Object(o.b)(),t=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,r=c.a.useMemo((function(){return Object.values(t||{}).map((function(e){var a=e.tenCaLamViec;return{value:e.id,label:a}}))}),[t]);var u=Object(l.b)(i.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{showSearch:!0,allowClear:!0,filterOption:i.onSelectSearch,onChange:function(e){n(Object(d.addSelectedId)(e))}},options:r});return a?Object(l.b)(i.MyForm,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:u}):u}},762:function(e,a,n){"use strict";var t=n(13),c=n(14),i=n(0),o=n.n(i),d=n(10),l=n(48),r=n(189),u=n(34),b=n(105),s=n(376),m=n(15),O=u.d.thongKeDiemDanhModal;a.a=function(e){var a,n=e.datas,i=Object(l.b)(),u=Object(l.c)((function(e){return e.form})).modal,j=Object(l.c)((function(e){return e.caLamViec})).caLamViecs,h=o.a.useMemo((function(){var e;return!!(null===u||void 0===u||null===(e=u[O])||void 0===e?void 0:e.open)}),[null===(a=u[O])||void 0===a?void 0:a.open]),v=o.a.useMemo((function(){return h?Object.values(n).reduce((function(e,a){var n=a.caLamViecId,i=a.congNgay,o=a.congTangCaNgay,d=null===j||void 0===j?void 0:j[n||""],l=(null===e||void 0===e?void 0:e[n||""])||{},r=(null===l||void 0===l?void 0:l.tong)||0,u=(null===l||void 0===l?void 0:l.diLam)||0,b=i||o?1:0,s=(null===l||void 0===l?void 0:l.vang)||0,m=i||o?0:1;return n?Object(c.a)(Object(c.a)({},e),{},Object(t.a)({},n,Object(c.a)(Object(c.a)({},d),{},{tong:r+1,diLam:u+b,vang:s+m}))):e}),{}):{}}),[h,n,j]);return Object(m.b)(d.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:h,onClose:function(){return i(r.a({modalId:O}))},width:700,modalId:O,datas:n,children:Object(m.b)(s.a,{scroll:{x:500},constants:b.b,datas:v,pagination:!1})})}},989:function(e,a,n){"use strict";n.r(a);var t=n(3),c=n.n(t),i=n(13),o=n(14),d=n(8),l=n(35),r=n(0),u=n.n(r),b=n(48),s=n(383),m=n(121),O=n(165),j=n(110),h=n(483),v=n(485),g=n(101),f=n(168),p=n(375),y=n(34),D=n(249),C=n(376),I=n(248),V=n(190),M=n(189),T=n(148),N=n(10),w=n(74),G=n(55),F=n(103),k=n(134),L=n(105),S={getTableColumns:function(){return[y.a.stt,G.b.maNV,G.b.hoTen,k.a.tenBoPhan,F.a.tenChucVu,w.a.tenCaLamViec,L.a.gioVao,L.a.gioRa,L.a.tongGio,L.a.congNgay,L.a.congTangCaNgay,L.a.lyDoVang,y.a.capNhatRow]},getInputFields:function(){return[L.a.congNgay,L.a.congTangCaNgay,L.a.lyDoVang]},getExcelFields:function(){return[G.b.maNV,G.b.hoTen,G.b.boPhanId,F.a.tenChucVu,w.a.tenCaLamViec,L.a.congNgay,L.a.congTangCaNgay,L.a.lyDoVang]}},x=n(422),P=n(749),R=n(43),E=n(15),K=y.d.diemDanhDauGiayModal,z=function(e){var a,n,t,i=e.selectedTime,r=Object(f.useForm)(),s=Object(l.a)(r,1)[0],m=Object(f.useForm)(),O=Object(l.a)(m,1)[0],j=Object(b.b)(),h=Object(b.c)((function(e){return e.form})),v=h.modal,g=h.datas,p=Object(b.c)((function(e){return e.caLamViec})).caLamViecs,y=Object(b.c)((function(e){return e.account})).accountData,D=null===y||void 0===y||null===(a=y.paths)||void 0===a||null===(n=a.diemDanhDauGiay)||void 0===n?void 0:n.edit,C=u.a.useMemo((function(){var e;return!!(null===v||void 0===v||null===(e=v[K])||void 0===e?void 0:e.open)}),[null===(t=v[K])||void 0===t?void 0:t.open]),I=null===g||void 0===g?void 0:g[K];function V(){return(V=Object(d.a)(c.a.mark((function e(){var a,n,t,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return",Object(R.f)());case 2:return!0,e.next=5,O.validateFields();case 5:return n=e.sent,t=null===n||void 0===n?void 0:n.caLamViecId,d=null===p||void 0===p||null===(a=p[t])||void 0===a?void 0:a.tenCaLamViec,e.next=10,j(Object(x.g)({selectedTime:i,diemDanhDauGiayData:Object(o.a)(Object(o.a)({},n),{},{tenCaLamViec:d,id:I.id})}));case 10:e.sent&&j(M.a({modalId:K}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.useEffect((function(){var e=null===g||void 0===g?void 0:g[K];e?(s.setFieldsValue(e),O.setFieldsValue(e)):(s.resetFields(),O.resetFields())}),[I]);var T=[G.b.maNV,G.b.hoTen],w=S.getInputFields();return Object(E.c)(N.MyModal,{title:"\u0110i\u1ec3m Danh",visible:C,onClose:function(){j(M.a({modalId:K}))},onOkModal:function(){return V.apply(this,arguments)},width:700,modalId:K,datas:g,children:[Object(E.b)(N.MyForm,{form:s,options:Object(N.getFormItemFields)(T),labelCol:{span:8},wrapperCol:{span:16}}),Object(E.b)(N.MyForm,{form:O,options:Object(N.getFormItemFields)(w),labelCol:{span:8},wrapperCol:{span:16}}),Object(E.b)(P.a,{form:O})]})},B=n(762),J=n(224),A=n(17),Q=n(61),q=n(499),H=n(527),U=n.n(H),W=n(492),X=n(387),Y=y.b.diemDanhDauGiay,Z=function(e){var a=e.modalId,n=Object(b.b)(),t=Object(b.c)((function(e){return e.form})),c=t.modal,i=t.datas,o=Object(b.c)((function(e){return e.hideColumns})),d=null===o||void 0===o?void 0:o[y.d.diemDanhDauGiayModal],l=u.a.useMemo((function(){return a||Y}),[a]),r=u.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[Y])||void 0===e?void 0:e.open)}),[c[Y]]);var s=u.a.useMemo((function(){return S.getTableColumns()}),[]);return Object(E.b)(N.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:r,onClose:function(){n(M.a({modalId:Y}))},width:600,modalId:l,datas:i,children:Object(E.b)(W.b,{dataSource:s,renderItem:function(e){return Object(E.c)(W.b.Item,{className:(null===d||void 0===d?void 0:d[e.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){n(Object(X.b)({tableId:y.d.diemDanhDauGiayModal,columnId:e.id}))},children:[Object(E.b)(W.b.Item.Meta,{title:e.name}),Object(E.b)("div",{children:e.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},$=n(377),_=function(e){e.selectedTime;var a,n=e.dateTimePicker,t=Object(b.b)();return Object(E.c)(E.a,{children:[Object(E.b)(p.a,{header:Object(E.b)("div",{className:"font-weight-bold",children:Object(E.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(E.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(E.b)("div",{children:null===n||void 0===n||null===(a=n.getDayRender)||void 0===a?void 0:a.call(n)}),Object(E.b)("div",{children:Object(E.b)(Q.a,{type:"primary",icon:Object(E.b)(q.a,{}),onClick:function(){return t(Object(M.c)({modalId:y.b.diemDanhDauGiay}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})})]}),footer:Object(E.b)("div",{children:Object(E.b)(Q.a,{icon:Object(E.b)(U.a,{}),onClick:function(){t(Object($.b)({tagPageId:y.d.diemDanhDauGiayModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(E.b)(Z,{modalId:y.d.diemDanhDauGiayModal})]})},ee=n(73),ae=y.d.diemDanhDauGiayModal;a.default=function(){var e,a,n,t,r=Object(b.b)(),w=Object(f.useForm)(),G=Object(l.a)(w,1)[0],F=Object(s.b)(),k=Object(l.a)(F,2),P=k[0],K=k[1],Q=Object(b.c)((function(e){return e.diemDanhDauGiay})).bamVanTayByMonth,q=Object(b.c)((function(e){var a;return null===(a=e.tagsPage)||void 0===a?void 0:a[ae]})),H=Object(b.c)((function(e){return e.account})).accountData,U=null===H||void 0===H||null===(e=H.paths)||void 0===e||null===(a=e.diemDanhDauGiay)||void 0===a?void 0:a.edit;u.a.useEffect((function(){G.setFieldsValue({congNgay:1}),r(Object(T.h)())}),[]),u.a.useEffect((function(){return r(Object(x.d)(P)),r(Object(x.c)(P)),function(){Object(A.h)("diemDanhDauGiayNgay")}}),[P]);var W=Object(b.c)((function(e){return{nhanSusDauGiay:e.nhanSu.nhanSusDauGiay,selectedRows:e.table.selectedRows}})),X=W.nhanSusDauGiay,Y=W.selectedRows,Z=Object(b.c)((function(e){return e.diemDanhDauGiay})),ne=Z.tabsData,te=Z.loading,ce=Z.diemDanhDauGiaysDay,ie=Z.pageSize,oe=Object(I.a)({Instance:J.a,onPending:x.e,addSelectedId:x.a});function de(){return(de=Object(d.a)(c.a.mark((function e(){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return",Object(R.f)());case 2:if(a=G.getFieldsValue(),0!==(n=Y[ae]||[]).length){e.next=6;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 6:return e.next=8,r(Object(x.h)({selectedTime:P,nhanSuArray:n,noiDungDiemDanhDauGiays:a}));case 8:r(Object(V.c)());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=u.a.useMemo((function(){var e={trangThaiNhanSuId:ee.c.working.id},a=r(Object(T.c)(X,e)),n="ngayQuet"+(null===P||void 0===P?void 0:P.format("DD"));return Object.entries(a).reduce((function(e,a){var t,c=Object(l.a)(a,2),d=c[0],r=c[1],u=(null===Q||void 0===Q||null===(t=Q[d])||void 0===t?void 0:t[n])||{},b=(null===ce||void 0===ce?void 0:ce[d])||{},s=Object(o.a)(Object(o.a)(Object(o.a)({},r),b),u);return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},d,s))}),{})}),[X,ce,Q,P]);return Object(E.c)("div",{className:"diemDanhDauGiay-page",css:D.a,children:[Object(E.b)(p.b,{className:"tabs",options:ne,activeKey:"all",onTabClick:function(e){"taiExcel"===e?r(Object(V.b)({tableId:ae,constants:S,fileSheet:"diemDanhDauGiayCom",fileName:"diemDanhDauGiayCom"})):"aside"===e?r(Object($.b)({tagPageId:ae})):"xemThongKe"===e&&r(Object(M.c)({modalId:y.d.thongKeDiemDanhModal}))}}),Object(E.c)("div",{className:"tabs-main",children:[q&&Object(E.b)(_,{dateTimePicker:K,selectedTime:P}),Object(E.c)("div",{className:"aside-main",children:[Object(E.c)(O.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(E.b)(j.a,{sm:7,md:6,lg:5,children:K.getDayRender()}),Object(E.b)(j.a,{sm:17,md:18,lg:19,children:Object(E.c)(h.a,{layout:"inline",form:G,children:[Object(E.b)(h.a.Item,{name:L.a.congNgay.id,children:Object(E.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(E.b)(h.a.Item,{name:L.a.congTangCaNgay.id,children:Object(E.b)(v.a,{placeholder:"T\u0103ng ca",min:0})}),Object(E.b)(h.a.Item,{name:L.a.lyDoVang.id,children:Object(E.b)(g.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(n=S.lyDoVang)||void 0===n||null===(t=n.form)||void 0===t?void 0:t.options)||[],allowClear:!0})}),Object(E.b)(N.MyButton,{onClick:function(){return de.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(E.b)(C.a,{constants:S,actions:oe,datas:le,loading:te,modalId:ae,pageSize:ie,isSelection:!0,onChange:function(e){r(Object(x.f)(e.pageSize))},pagination:!0,onRow:function(e){return{onClick:function(){console.log(e)}}}})]})]}),Object(E.b)(z,{selectedTime:P}),Object(E.b)(B.a,{datas:le})]})}}}]);