(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[18],{748:function(e,a,n){"use strict";var t=n(0),c=n.n(t),i=n(10),o=n(45),d=n(364),l=n(11);a.a=function(e){var a=e.form,n=Object(o.b)(),t=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,r=c.a.useMemo((function(){return Object.values(t||{}).map((function(e){var a=e.caLamViecName;return{value:e.id,label:a}}))}),[t]);var b=Object(l.b)(i.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{showSearch:!0,allowClear:!0,filterOption:i.onSelectSearch,onChange:function(e){n(Object(d.addSelectedId)(e))}},options:r});return a?Object(l.b)(i.MyForm,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:b}):b}},931:function(e,a,n){"use strict";n.r(a);var t=n(5),c=n.n(t),i=n(13),o=n(18),d=n(9),l=n(40),r=n(0),b=n.n(r),u=n(45),s=n(372),m=n(113),O=n(157),j=n(101),h=n(445),v=n(447),f=n(91),g=n(160),p=n(352),y=n(39),I=n(235),D=n(353),C=n(234),M=n(183),V=n(182),T=n(237),L=n(10),w=n(98),F=n(94),N=n(68),k=n(242),S=n(748),x=n(11),P=y.d.diemDanhModal,K=function(e){var a,n=e.selectedTime,t=Object(g.useForm)(),i=Object(l.a)(t,1)[0],r=Object(g.useForm)(),s=Object(l.a)(r,1)[0],m=Object(u.b)(),O=Object(u.c)((function(e){return e.form})),j=O.modal,h=O.datas,v=Object(u.c)((function(e){return e.caLamViec})).caLamViecs,f=b.a.useMemo((function(){var e;return!!(null===j||void 0===j||null===(e=j[P])||void 0===e?void 0:e.open)}),[null===(a=j[P])||void 0===a?void 0:a.open]),p=null===h||void 0===h?void 0:h[P];function y(){return(y=Object(d.a)(c.a.mark((function e(){var a,t,i,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,s.validateFields();case 3:return t=e.sent,i=null===t||void 0===t?void 0:t.caLamViecId,d=null===v||void 0===v||null===(a=v[i])||void 0===a?void 0:a.caLamViecName,e.next=8,m(Object(k.i)({selectedTime:n,diemDanhData:Object(o.a)(Object(o.a)({},t),{},{caLamViecName:d,id:p.id})}));case 8:e.sent&&m(V.a({modalId:P}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b.a.useEffect((function(){var e=null===h||void 0===h?void 0:h[P];e?(i.setFieldsValue(e),s.setFieldsValue(e)):(i.resetFields(),s.resetFields())}),[p]);var I=[F.b.maNV,N.a.hoTen],D=w.a.getInputFields();return Object(x.c)(L.MyModal,{title:"\u0110i\u1ec3m Danh",visible:f,onClose:function(){m(V.a({modalId:P}))},onOkModal:function(){return y.apply(this,arguments)},width:700,modalId:P,datas:h,children:[Object(x.b)(L.MyForm,{form:i,options:Object(L.getFormItemFields)(I),labelCol:{span:8},wrapperCol:{span:16}}),Object(x.b)(L.MyForm,{form:s,options:Object(L.getFormItemFields)(D),labelCol:{span:8},wrapperCol:{span:16}}),Object(x.b)(S.a,{form:s})]})},R=y.d.thongKeDiemDanhModal,E=function(e){var a,n=e.datas,t=Object(u.b)(),c=Object(u.c)((function(e){return e.form})).modal,d=Object(u.c)((function(e){return e.caLamViec})).caLamViecs,l=b.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[R])||void 0===e?void 0:e.open)}),[null===(a=c[R])||void 0===a?void 0:a.open]),r=b.a.useMemo((function(){return l?Object.values(n).reduce((function(e,a){var n=a.caLamViecId,t=a.congNgay,c=a.congTangCaNgay,l=null===d||void 0===d?void 0:d[n||""],r=(null===e||void 0===e?void 0:e[n])||{},b=(null===r||void 0===r?void 0:r.tong)||0,u=(null===r||void 0===r?void 0:r.diLam)||0,s=t||c?1:0,m=(null===r||void 0===r?void 0:r.vang)||0,O=t||c?0:1;return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},n,Object(o.a)(Object(o.a)({},l),{},{tong:b+1,diLam:u+s,vang:m+O})))}),{}):{}}),[l,n,d]);return Object(x.b)(L.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:l,onClose:function(){return t(V.a({modalId:R}))},width:700,modalId:R,datas:n,children:Object(x.b)(D.a,{scroll:{x:500},constants:w.b,datas:r,pagination:!1})})},z=n(214),B=n(135),W=n(22),J=n(57),q=n(459),A=n(462),H=n(506),Q=n.n(H),X=n(454),G=n(365),U=y.b.diemDanh,Y=function(e){var a=e.modalId,n=Object(u.b)(),t=Object(u.c)((function(e){return e.form})),c=t.modal,i=t.datas,o=Object(u.c)((function(e){return e.hideColumns})),d=null===o||void 0===o?void 0:o[y.d.diemDanhModal],l=b.a.useMemo((function(){return a||U}),[a]),r=b.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[U])||void 0===e?void 0:e.open)}),[c[U]]);var s=b.a.useMemo((function(){return w.a.getTableColumns()}),[]);return Object(x.b)(L.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:r,onClose:function(){n(V.a({modalId:U}))},width:600,modalId:l,datas:i,children:Object(x.b)(X.b,{dataSource:s,renderItem:function(e){return Object(x.c)(X.b.Item,{className:(null===d||void 0===d?void 0:d[e.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){n(Object(G.b)({tableId:y.d.diemDanhModal,columnId:e.id}))},children:[Object(x.b)(X.b.Item.Meta,{title:e.name}),Object(x.b)("div",{children:e.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},Z=n(358),$=function(e){var a,n=e.selectedTime,t=e.dateTimePicker,c=Object(u.b)();return Object(x.c)(x.a,{children:[Object(x.b)(p.a,{header:Object(x.b)("div",{className:"font-weight-bold",children:Object(x.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(x.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(x.b)("div",{children:null===t||void 0===t||null===(a=t.getDayRender)||void 0===a?void 0:a.call(t)}),Object(x.b)("div",{style:{marginBottom:"7px"},children:Object(x.b)(J.a,{type:"primary",icon:Object(x.b)(q.a,{}),onClick:function(){n&&c(Object(k.e)(n,n))},children:"L\u1ea5y g\u1ee3i \xfd \u0111i\u1ec3m danh"})}),Object(x.b)("div",{children:Object(x.b)(J.a,{type:"primary",icon:Object(x.b)(A.a,{}),onClick:function(){return c(Object(V.c)({modalId:y.b.diemDanh}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})})]}),footer:Object(x.b)("div",{children:Object(x.b)(J.a,{icon:Object(x.b)(Q.a,{}),onClick:function(){c(Object(Z.b)({tagPageId:y.d.diemDanhModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(x.b)(Y,{modalId:y.d.diemDanhModal})]})},_=y.d.diemDanhModal;a.default=function(){var e,a,n=Object(u.b)(),t=Object(g.useForm)(),r=Object(l.a)(t,1)[0],F=Object(s.b)(),N=Object(l.a)(F,2),S=N[0],P=N[1],R=Object(u.c)((function(e){return e.diemDanh})).bamVanTayByMonth,J=Object(u.c)((function(e){var a;return null===(a=e.tagsPage)||void 0===a?void 0:a[_]}));b.a.useEffect((function(){r.setFieldsValue({congNgay:1}),n(T.i())}),[]),b.a.useEffect((function(){return n(Object(k.f)(S)),n(Object(k.c)(S)),function(){Object(W.h)("diemDanhNgay")}}),[S]);var q=Object(u.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,boPhans:e.boPhan.boPhans,chucVus:e.chucVu.chucVus,caLamViecs:e.caLamViec.caLamViecs,selectedRows:e.table.selectedRows}})),A=q.nhanSusWorking,H=q.boPhans,Q=q.chucVus,X=q.caLamViecs,G=q.selectedRows,U=Object(u.c)((function(e){return e.diemDanh})),Y=U.tabsData,ee=U.loading,ae=U.diemDanhsDay,ne=U.pageSize,te=Object(C.a)({Instance:z.a,onPending:k.g,addSelectedId:k.a});function ce(){return(ce=Object(d.a)(c.a.mark((function e(){var a,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getFieldsValue(),0!==(t=G[_]||[]).length){e.next=4;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 4:return e.next=6,n(Object(k.j)({selectedTime:S,nhanSuArray:t,noiDungDiemDanhs:a}));case 6:n(Object(M.c)());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=b.a.useMemo((function(){var e=n(Object(T.c)(A,{boPhanId:"quayCom"})),a="ngayQuet"+(null===S||void 0===S?void 0:S.format("DD"));return Object.entries(e).reduce((function(e,n){var t,c=Object(l.a)(n,2),d=c[0],r=c[1],b=(null===R||void 0===R||null===(t=R[d])||void 0===t?void 0:t[a])||{},u=(null===ae||void 0===ae?void 0:ae[d])||{},s=Object(o.a)(Object(o.a)(Object(o.a)({},r),u),b);return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},d,s))}),{})}),[A,H,Q,X,ae,R,S]);return Object(x.c)("div",{className:"diemDanh-page",css:I.a,children:[Object(x.b)(p.b,{className:"tabs",options:Y,activeKey:"all",onTabClick:function(e){"taiExcel"===e?n(Object(M.b)({tableId:_,constants:w.a,fileSheet:"diemDanhCom",fileName:"diemDanhCom"})):"aside"===e?n(Object(Z.b)({tagPageId:_})):"xemThongKe"===e&&n(Object(V.c)({modalId:y.d.thongKeDiemDanhModal}))}}),Object(x.c)("div",{className:"tabs-main",children:[J&&Object(x.b)($,{dateTimePicker:P,selectedTime:S}),Object(x.c)("div",{className:"aside-main",children:[Object(x.c)(O.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(x.b)(j.a,{sm:6,md:5,lg:4,children:P.getDayRender()}),Object(x.b)(j.a,{sm:18,md:19,lg:20,children:Object(x.c)(h.a,{layout:"inline",form:r,children:[Object(x.b)(h.a.Item,{name:w.a.congNgay.id,children:Object(x.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(x.b)(h.a.Item,{name:w.a.congTangCaNgay.id,children:Object(x.b)(v.a,{placeholder:"T\u0103ng ca",min:0})}),Object(x.b)(h.a.Item,{name:w.a.hoTroXang.id,children:Object(x.b)(v.a,{placeholder:"HT x\u0103ng",min:0,step:2e4,parser:B.a.parser,formatter:B.a.formatter})}),Object(x.b)(h.a.Item,{name:w.a.lyDoVang.id,children:Object(x.b)(f.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(e=w.a.lyDoVang)||void 0===e||null===(a=e.form)||void 0===a?void 0:a.options)||[],allowClear:!0})}),Object(x.b)(L.MyButton,{onClick:function(){return ce.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(x.b)(D.a,{constants:w.a,actions:te,datas:ie,loading:ee,modalId:_,pageSize:ne,isSelection:!0,onChange:function(e){n(Object(k.h)(e.pageSize))},pagination:!0})]})]}),Object(x.b)(K,{selectedTime:S}),Object(x.b)(E,{datas:ie})]})}}}]);