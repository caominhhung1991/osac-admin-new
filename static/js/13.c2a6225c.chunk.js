(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[13],{659:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(12),c=a(5),i=a.n(c),o=a(32),r=a(9),l=a(25),d=a(116);function u(e){var t=e.Instance,a=e.onPending,c=e.addSelectedId,u=e.onDelete,s=e.onActive;return{onAddAsync:function(e){return function(){var n=Object(r.a)(i.a.mark((function n(r){var d,u,s,b,m;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=e.validatedValues,u=d.otherPath,r(a(!0)),s=new t,b=u?[].concat(Object(o.a)(s.pathDatas),Object(o.a)(u)):s.pathDatas,n.next=7,Object(l.a)(b,d);case 7:return m=n.sent,c&&r(null===c||void 0===c?void 0:c(null===m||void 0===m?void 0:m.id)),r(a(!1)),n.abrupt("return",m);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},onUpdateAsync:function(e){return function(){var n=Object(r.a)(i.a.mark((function n(c){var r,u,s,b,m,h;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.currentData,u=e.validatedValues,s=r.id,b=r.otherPath,s){n.next=4;break}return n.abrupt("return",d.b.error("Ch\u01b0a c\xf3 id"));case 4:return c(a(!0)),m=new t,h=b?[].concat(Object(o.a)(m.pathDatas),Object(o.a)(b),[s]):[].concat(Object(o.a)(m.pathDatas),[s]),n.next=9,Object(l.h)(h,u);case 9:return c(a(!1)),n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},onActiveAsync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var n=Object(r.a)(i.a.mark((function n(c){var r,d,u,b,m;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,d=e.active,u=e.otherPath,c(a(!0)),b=new t,m=u?[].concat(Object(o.a)(b.pathDatas),Object(o.a)(u),[r]):[].concat(Object(o.a)(b.pathDatas),[r]),n.next=6,Object(l.h)(m,{active:d});case 6:s&&c(s(r,d)),c(a(!1));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},onDeleteAsync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var c=Object(r.a)(i.a.mark((function c(r){var d,s,b,m,h,f,g,v;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s=e.id,b=e.otherPath,r(a(!0)),m=new t,h=b?[].concat(Object(o.a)(b),[s]).join("/"):s,f=m.getPathDatas(h),g=m.getPathDeleted(h),d={},Object(n.a)(d,f,null),Object(n.a)(d,g,e),v=d,c.next=9,Object(l.h)(null,v);case 9:return u&&r(u(e)),r(a(!1)),c.abrupt("return",!0);case 12:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}}}},660:function(e,t,a){"use strict";var n=a(662);a.d(t,"a",(function(){return n.a}));a(661),a(663),a(664);var c=a(665);a.d(t,"b",(function(){return c.a}))},666:function(e,t,a){"use strict";var n=a(44),c=a(29),i=a(667),o=a(0),r=a.n(o),l=a(54),d=a(11),u=a(327),s=a(14),b=["modalId","constants","actions","datas","loading","isSelection","form","rowSelection","summary"];t.a=function(e){var t=e.modalId,a=e.constants,o=e.actions,m=e.datas,h=e.loading,f=e.isSelection,g=e.form,v=e.rowSelection,O=e.summary,j=Object(i.a)(e,b),p=Object(l.b)(),y=Object(l.c)((function(e){return e.table})).selectedRowKeys,D=Object(l.c)((function(e){return e.hideColumns})),w=null===D||void 0===D?void 0:D[t||""],N=r.a.useMemo((function(){var e={};return f?e.rowSelection=Object(c.a)({selectedRowKeys:y[t||""]||[],onChange:function(e,a){p(Object(u.d)({tableId:t,selectedRowKeys:e,selectedRows:a}))}},v):delete e.rowSelection,e}),[f,y]);function T(e,t){var a=Object(c.a)(Object(c.a)({},e),{},{active:t});p(null===o||void 0===o?void 0:o.onActiveAsync(a))}function C(e){(null===o||void 0===o?void 0:o.onDeleteAsync)&&p(o.onDeleteAsync(e))}var I=Object(d.useSearchText)(),V=Object(n.a)(I,3),x=V[0],M=V[1],k=V[2],S=r.a.useMemo((function(){var e=Object(d.getTableColumns)(a,{onActiveItem:T,onDeleteItem:C,searchText:x,searchInput:k,setSearchText:M,modalId:t,constants:a,form:g});return w&&(e=e.filter((function(e){return!(null===w||void 0===w?void 0:w[e.id])}))),e}),[x,w]),L=r.a.useMemo((function(){var t=Object.values(m||{});return(null===e||void 0===e?void 0:e.onCallbackDataSource)&&(t=e.onCallbackDataSource(t)),t}),[m]);return Object(s.b)("div",{className:"table",children:Object(s.b)(d.MyTable,Object(c.a)(Object(c.a)(Object(c.a)({},N),j),{},{rowKey:"id",height:"100%",loading:h,columns:S,dataSource:L,summary:O||null}))})}},677:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(44),c=a(0),i=a.n(c),o=a(38),r=a.n(o),l=a(419),d=a(210),u=a(132),s=a(172),b=a(220),m=a(14),h=function(e){var t=e||{},a=t.disabledDate,o=t.editabledDate,u=t.className,h=t.defaultTime,f=void 0===h?r()():h,g=t.disabled,v=Object(c.useState)(f),O=Object(n.a)(v,2),j=O[0],p=O[1],y=Object(c.useState)((function(){return Object(s.b)(f)})),D=Object(n.a)(y,2),w=D[0],N=D[1],T=i.a.useMemo((function(){return null===o||void 0===o?void 0:o(j)}),[j,o]);function C(e){var t=Object(s.b)(e);N(t),p(e)}var I=function(e){var t=e.label,n=e.format,c=e.width,i=e.picker;return Object(m.b)(l.a.Item,{label:t,children:Object(m.b)(d.a,{locale:b.a,style:{width:c},format:n,picker:i,value:j,onChange:C,disabledDate:a,disabled:g,className:u})})};return[j,{getDayRender:function(){return I({picker:"date",label:"Ng\xe0y: ",format:"DD/MM/YY",width:"110px"})},getMonthRender:function(){return I({picker:"month",label:"Th\xe1ng: ",format:"MM/YYYY",width:"110px"})},getYearRender:function(){return I({picker:"year",label:"N\u0103m: ",format:"YYYY",width:"110px"})},isEditabledDate:T,selectedTime:j,yearAndDayOfYear:w,getDayOfAll:function(){return null===w||void 0===w?void 0:w.dayOfAll},onUpdate:C}]};h.defaultProps={disabledDate:u.noop,width:"105px",format:"DD/MM/YY",className:"",defaultTime:r()(),disabled:!1};var f=h},695:function(e,t,a){"use strict";var n=a(659);a.d(t,"a",(function(){return n.a}));var c=a(677);a.d(t,"b",(function(){return c.a}))},735:function(e,t,a){"use strict";var n=a(0),c=a.n(n),i=a(11),o=a(54),r=a(338),l=a(14);t.a=function(e){var t=e.form,a=Object(o.b)(),n=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,d=c.a.useMemo((function(){return Object.values(n||{}).map((function(e){var t=e.caLamViecName;return{value:e.id,label:t}}))}),[n]);var u=Object(l.b)(i.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{showSearch:!0,allowClear:!0,filterOption:i.onSelectSearch,onChange:function(e){a(Object(r.addSelectedId)(e))}},options:d});return t?Object(l.b)(i.MyForm,{form:t,labelCol:{span:8},wrapperCol:{span:16},children:u}):u}},917:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a.n(n),i=a(12),o=a(29),r=a(9),l=a(44),d=a(0),u=a.n(d),s=a(54),b=a(695),m=a(116),h=a(149),f=a(96),g=a(419),v=a(421),O=a(88),j=a(298),p=a(660),y=a(40),D=a(668),w=a(666),N=a(659),T=a(327),C=a(217),I=a(329),V=a(11),x=a(117),M=a(69),k=a(176),S=a(118),L=a(150),P={congNgay:{id:"congNgay",name:"C\xf4ng ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},congTangCaNgay:{id:"congTangCaNgay",name:"T\u0103ng ca",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},hoTroXang:{id:"hoTroXang",name:"HT x\u0103ng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},lyDoVang:{id:"lyDoVang",name:"L\xfd do v\u1eafng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"select",options:[{label:"NP",value:"NP"},{label:"KP",value:"KP"},{label:"CG",value:"CG"}]}},gioVao:{id:"gioVao",name:"G. v\xe0o",width:80,className:"text-small",align:"center"},gioRa:{id:"gioRa",name:"G. ra",width:80,className:"text-small",align:"center"},tongGio:{id:"tongGio",name:"T. gi\u1edd",width:80,className:"text-small",align:"center"},getTableColumns:function(){return[y.a.stt,x.b.maNV,M.a.hoTen,L.a.boPhanName,S.a.chucVuName,k.a.caLamViecName,this.gioVao,this.gioRa,this.tongGio,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang,y.a.capNhatRow]},getInputFields:function(){return[this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]},getExcelFields:function(){return[x.b.maNV,M.a.hoTen,x.b.boPhanId,S.a.chucVuName,k.a.caLamViecName,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]}},F={tong:{id:"tong",name:"T\u1ed5ng",width:70,className:"text-small font-weight-bold",align:"center"},diLam:{id:"diLam",name:"\u0110i l\xe0m",width:70,className:"text-small font-weight-bold",align:"center"},vang:{id:"vang",name:"v\u1eafng",width:70,className:"text-small font-weight-bold",align:"center"},getTableColumns:function(){return[Object(o.a)(Object(o.a)({},k.a.caLamViecName),{},{fixed:!1}),this.tong,this.diLam,this.vang]},getInputFields:function(){return[]}},A=a(352),R=a(735),Y=a(14),K=y.d.diemDanhModal,G=function(e){var t,a=e.selectedTime,n=Object(j.useForm)(),i=Object(l.a)(n,1)[0],d=Object(j.useForm)(),b=Object(l.a)(d,1)[0],m=Object(s.b)(),h=Object(s.c)((function(e){return e.form})),f=h.modal,g=h.datas,v=Object(s.c)((function(e){return e.caLamViec})).caLamViecs,O=u.a.useMemo((function(){var e;return!!(null===f||void 0===f||null===(e=f[K])||void 0===e?void 0:e.open)}),[null===(t=f[K])||void 0===t?void 0:t.open]),p=null===g||void 0===g?void 0:g[K];function y(){return(y=Object(r.a)(c.a.mark((function e(){var t,n,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,b.validateFields();case 3:return n=e.sent,i=null===n||void 0===n?void 0:n.caLamViecId,r=null===v||void 0===v||null===(t=v[i])||void 0===t?void 0:t.caLamViecName,e.next=8,m(Object(A.h)({selectedTime:a,diemDanhData:Object(o.a)(Object(o.a)({},n),{},{caLamViecName:r,id:p.id})}));case 8:e.sent&&m(C.a({modalId:K}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.useEffect((function(){var e=null===g||void 0===g?void 0:g[K];e?(i.setFieldsValue(e),b.setFieldsValue(e)):(i.resetFields(),b.resetFields())}),[p]);var D=[x.b.maNV,M.a.hoTen],w=P.getInputFields();return Object(Y.c)(V.MyModal,{title:"\u0110i\u1ec3m Danh",visible:O,onClose:function(){m(C.a({modalId:K}))},onOkModal:function(){return y.apply(this,arguments)},width:700,modalId:K,datas:g,children:[Object(Y.b)(V.MyForm,{form:i,options:Object(V.getFormItemFields)(D),labelCol:{span:8},wrapperCol:{span:16}}),Object(Y.b)(V.MyForm,{form:b,options:Object(V.getFormItemFields)(w),labelCol:{span:8},wrapperCol:{span:16}}),Object(Y.b)(R.a,{form:b})]})},E=y.d.thongKeDiemDanhModal,X=function(e){var t,a=e.datas,n=Object(s.b)(),c=Object(s.c)((function(e){return e.form})).modal,r=Object(s.c)((function(e){return e.caLamViec})).caLamViecs,l=u.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[E])||void 0===e?void 0:e.open)}),[null===(t=c[E])||void 0===t?void 0:t.open]),d=u.a.useMemo((function(){return l?Object.values(a).reduce((function(e,t){var a=t.caLamViecId,n=t.congNgay,c=t.congTangCaNgay,l=null===r||void 0===r?void 0:r[a||""],d=(null===e||void 0===e?void 0:e[a])||{},u=(null===d||void 0===d?void 0:d.tong)||0,s=(null===d||void 0===d?void 0:d.diLam)||0,b=n||c?1:0,m=(null===d||void 0===d?void 0:d.vang)||0,h=n||c?0:1;return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},a,Object(o.a)(Object(o.a)({},l),{},{tong:u+1,diLam:s+b,vang:m+h})))}),{}):{}}),[l,a,r]);return Object(Y.b)(V.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:l,onClose:function(){return n(C.a({modalId:E}))},width:700,modalId:E,datas:a,children:Object(Y.b)(w.a,{scroll:{x:500},constants:F,datas:d,pagination:!1})})},z=a(199),B=a(172),W=a(25),H=a(57),J=a(434),U=a(437),q=a(481),Q=a.n(q),Z=a(429),$=a(339),_=y.b.diemDanh,ee=function(e){var t=e.modalId,a=Object(s.b)(),n=Object(s.c)((function(e){return e.form})),c=n.modal,i=n.datas,o=Object(s.c)((function(e){return e.hideColumns})),r=null===o||void 0===o?void 0:o[y.d.diemDanhModal],l=u.a.useMemo((function(){return t||_}),[t]),d=u.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[_])||void 0===e?void 0:e.open)}),[c[_]]);var b=u.a.useMemo((function(){return P.getTableColumns()}),[]);return Object(Y.b)(V.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:d,onClose:function(){a(C.a({modalId:_}))},width:600,modalId:l,datas:i,children:Object(Y.b)(Z.b,{dataSource:b,renderItem:function(e){return Object(Y.c)(Z.b.Item,{className:(null===r||void 0===r?void 0:r[e.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){a(Object($.b)({tableId:y.d.diemDanhModal,columnId:e.id}))},children:[Object(Y.b)(Z.b.Item.Meta,{title:e.name}),Object(Y.b)("div",{children:e.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},te=a(332),ae=function(e){var t,a=e.selectedTime,n=e.dateTimePicker,c=Object(s.b)();return Object(Y.c)(Y.a,{children:[Object(Y.b)(p.a,{header:Object(Y.b)("div",{className:"font-weight-bold",children:Object(Y.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(Y.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(Y.b)("div",{children:null===n||void 0===n||null===(t=n.getDayRender)||void 0===t?void 0:t.call(n)}),Object(Y.b)("div",{style:{marginBottom:"7px"},children:Object(Y.b)(H.a,{type:"primary",icon:Object(Y.b)(J.a,{}),onClick:function(){a&&c(Object(A.d)(a,a))},children:"L\u1ea5y g\u1ee3i \xfd \u0111i\u1ec3m danh"})}),Object(Y.b)("div",{children:Object(Y.b)(H.a,{type:"primary",icon:Object(Y.b)(U.a,{}),onClick:function(){return c(Object(C.c)({modalId:y.b.diemDanh}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})})]}),footer:Object(Y.b)("div",{children:Object(Y.b)(H.a,{icon:Object(Y.b)(Q.a,{}),onClick:function(){c(Object(te.b)({tagPageId:y.d.diemDanhModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(Y.b)(ee,{modalId:y.d.diemDanhModal})]})},ne=y.d.diemDanhModal;t.default=function(){var e,t,a=Object(s.b)(),n=Object(j.useForm)(),d=Object(l.a)(n,1)[0],x=Object(b.b)(),M=Object(l.a)(x,2),k=M[0],S=M[1],L=Object(s.c)((function(e){return e.diemDanh})).bamVanTayByMonth,F=Object(s.c)((function(e){var t;return null===(t=e.tagsPage)||void 0===t?void 0:t[ne]}));u.a.useEffect((function(){d.setFieldsValue({congNgay:1}),a(I.h())}),[]),u.a.useEffect((function(){return a(Object(A.e)(k)),a(Object(A.c)(k)),function(){Object(W.g)("diemDanhNgay")}}),[k]);var R=Object(s.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,boPhans:e.boPhan.boPhans,chucVus:e.chucVu.chucVus,caLamViecs:e.caLamViec.caLamViecs,selectedRows:e.table.selectedRows}})),K=R.nhanSusWorking,E=R.boPhans,H=R.chucVus,J=R.caLamViecs,U=R.selectedRows,q=Object(s.c)((function(e){return e.diemDanh})),Q=q.tabsData,Z=q.loading,$=q.diemDanhsDay,_=q.pageSize,ee=Object(N.a)({Instance:z.a,onPending:A.f,addSelectedId:A.a});function ce(){return(ce=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.getFieldsValue(),0!==(n=U[ne]||[]).length){e.next=4;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 4:return e.next=6,a(Object(A.i)({selectedTime:k,nhanSuArray:n,noiDungDiemDanhs:t}));case 6:a(Object(T.c)());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=u.a.useMemo((function(){var e=a(Object(I.c)(K,{boPhanId:"quayCom"})),t="ngayQuet"+(null===k||void 0===k?void 0:k.format("DD"));return Object.entries(e).reduce((function(e,a){var n,c=Object(l.a)(a,2),r=c[0],d=c[1],u=(null===L||void 0===L||null===(n=L[r])||void 0===n?void 0:n[t])||{},s=(null===$||void 0===$?void 0:$[r])||{},b=Object(o.a)(Object(o.a)(Object(o.a)({},d),s),u);return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},r,b))}),{})}),[K,E,H,J,$,L,k]);return Object(Y.c)("div",{className:"diemDanh-page",css:D.a,children:[Object(Y.b)(p.b,{className:"tabs",options:Q,activeKey:"all",onTabClick:function(e){"taiExcel"===e?a(Object(T.b)({tableId:ne,constants:P,fileSheet:"diemDanhCom",fileName:"diemDanhCom"})):"aside"===e?a(Object(te.b)({tagPageId:ne})):"xemThongKe"===e&&a(Object(C.c)({modalId:y.d.thongKeDiemDanhModal}))}}),Object(Y.c)("div",{className:"tabs-main",children:[F&&Object(Y.b)(ae,{dateTimePicker:S,selectedTime:k}),Object(Y.c)("div",{className:"aside-main",children:[Object(Y.c)(h.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(Y.b)(f.a,{sm:6,md:5,lg:4,children:S.getDayRender()}),Object(Y.b)(f.a,{sm:18,md:19,lg:20,children:Object(Y.c)(g.a,{layout:"inline",form:d,children:[Object(Y.b)(g.a.Item,{name:P.congNgay.id,children:Object(Y.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(Y.b)(g.a.Item,{name:P.congTangCaNgay.id,children:Object(Y.b)(v.a,{placeholder:"T\u0103ng ca",min:0})}),Object(Y.b)(g.a.Item,{name:P.hoTroXang.id,children:Object(Y.b)(v.a,{placeholder:"HT x\u0103ng",min:0,step:2e4,parser:B.a.parser,formatter:B.a.formatter})}),Object(Y.b)(g.a.Item,{name:P.lyDoVang.id,children:Object(Y.b)(O.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(e=P.lyDoVang)||void 0===e||null===(t=e.form)||void 0===t?void 0:t.options)||[],allowClear:!0})}),Object(Y.b)(V.MyButton,{onClick:function(){return ce.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(Y.b)(w.a,{constants:P,actions:ee,datas:ie,loading:Z,modalId:ne,pageSize:_,isSelection:!0,onChange:function(e){a(Object(A.g)(e.pageSize))}})]})]}),Object(Y.b)(G,{selectedTime:k}),Object(Y.b)(X,{datas:ie})]})}}}]);