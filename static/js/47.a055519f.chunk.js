(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[47],{1042:function(e,t,n){"use strict";n.r(t);var a=n(34),i=n(0),r=n.n(i),c=n(48),o=n(194),d=n(386),u=n(193),l=n(384),h=n(35),s=n(250),b=n(13),m=n(751),g=n(9),f={chiTiet:{id:"chiTiet",name:"Chi ti\u1ebft",width:150,className:"text-small font-weight-bold",align:"center",form:{type:"text-area"}},khachHang:{id:"khachHang",name:"Kh\xe1ch h\xe0ng",width:100,className:"text-small font-weight-bold",form:{type:"input"}},tongTien:{id:"tongTien",name:"T\u1ed5ng ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",form:{type:"input-number-format"},render:g.numberRender},chietKhau:{id:"chietKhau",name:"Chi\u1ebft kh\u1ea5u",width:80,className:"text-small",align:"right",form:{type:"input-number-format"},render:g.numberRender},phaiThu:{id:"phaiThu",name:"Ph\u1ea3i thu",width:90,className:"text-small",align:"right",form:{type:"input-number-format"},render:g.numberRender},getTableColumns:function(){return[Object(b.a)(Object(b.a)({},h.a.stt),{},{fixed:!1}),m.a.ngay,this.chiTiet,this.khachHang,this.tongTien,this.chietKhau,this.phaiThu,h.a.editRow]},getInputFields:function(){return[m.a.ngay,this.chiTiet,this.khachHang,this.tongTien,this.chietKhau,this.phaiThu]},getExcelFields:function(){return[m.a.ngay,h.a.active]}},p=n(385),O=n(3),v=n.n(O),j=n(7),T=n(249),x=n(369),w=n(266),y=n(42),N=n(15),D=h.d.doanhThuOBDModal,k=function(e){var t,n,a=e.onAfterAddFinish,i=Object(T.a)({Instance:x.a,onPending:w.e,addSelectedId:w.a}),o=Object(c.b)(),d=Object(c.c)((function(e){return e.form})),l=d.modal,h=d.datas,s=Object(c.c)((function(e){return e.account})).accountData,m=null===s||void 0===s||null===(t=s.paths)||void 0===t||null===(n=t.doanhThuOBD)||void 0===n?void 0:n.edit,p=r.a.useMemo((function(){var e;return!!(null===l||void 0===l||null===(e=l[D])||void 0===e?void 0:e.open)}),[l[D]]);function O(){return(O=Object(j.a)(v.a.mark((function e(t,n){var r,c,d,l,h,s,p,O,j,T,x,w;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return",Object(y.f)());case 2:if(r=!0,c=n.ngay,d=Object(g.convertMomentToString)(f.getInputFields(),n),l=Object(b.a)(Object(b.a)({},t),n),h=l.tongTien,s=void 0===h?0:h,p=l.chietKhau,O=void 0===p?0:p,j=l.phaiThu,s===O+(void 0===j?0:j)){e.next=9;break}return e.abrupt("return",Object(y.d)("Chi\u1ebft kh\u1ea5u v\xe0 ph\u1ea3i thu kh\xf4ng b\u1eb1ng t\u1ed5ng ti\u1ec1n"));case 9:if(!n||!c){e.next=25;break}if(null===t||void 0===t?void 0:t.id){e.next=20;break}return x=c.format("YYMM"),w=[x],e.next=15,o(i.onAddAsync({validatedValues:Object(b.a)(Object(b.a)({},d),{},{otherPath:w,yearMonthId:x})}));case 15:r=e.sent,null===a||void 0===a||a(null===(T=r)||void 0===T?void 0:T.id),r=Boolean(r),e.next=25;break;case 20:return e.t0=Boolean,e.next=23,o(i.onUpdateAsync({currentData:t,validatedValues:d}));case 23:e.t1=e.sent,r=(0,e.t0)(e.t1);case 25:r&&o(u.a({modalId:D}));case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(N.b)(g.MyModal,{form:!0,title:Object(N.b)("div",{children:"Doanh Thu Osac B\xecnh D\u01b0\u01a1ng"}),visible:p,onClose:function(){o(u.a({modalId:D}))},onOkModal:function(e,t){return O.apply(this,arguments)},formOptions:Object(g.getFormItemFields)(f.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:D,datas:h})},C=n(60),I=n(71),B=function(e){var t=e.dateTimePicker,n=Object(c.b)();return Object(N.b)(N.a,{children:Object(N.b)(l.a,{header:Object(N.b)("div",{className:"font-weight-bold",children:Object(N.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(N.b)("div",{className:"form-input-aside",style:{padding:"5px"},children:Object(N.b)("div",{children:(null===t||void 0===t?void 0:t.getMonthRender())||null})}),footer:Object(N.b)("div",{children:Object(N.b)(C.a,{icon:Object(N.b)(I.a,{}),onClick:function(){n(Object(d.b)({tagPageId:h.d.doanhThuOBDModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},M=n(391),S=n(17),R=n(14),K=n(401),P=h.d.doanhThuOBDModal,F=Object(i.memo)((function(e){var t=e.pageData,n=Object(c.c)((function(e){return e.hideColumns})),a=null===n||void 0===n?void 0:n[P||""],i=r.a.useMemo((function(){var e=[h.a.stt,m.a.ngay,f.chiTiet,f.khachHang],t=[h.a.editRow];return[{id:0,colSpan:1+e.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(g.formatNumber)(e)}},{id:2,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(g.formatNumber)(e)}},{id:3,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(g.formatNumber)(e)}},{id:4,colSpan:t.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0)}]}),[a]),o=r.a.useMemo((function(){return t.reduce((function(e,t){var n=e.tongTien+(t.tongTien||0),a=e.chietKhau+(t.chietKhau||0),i=e.phaiThu+(t.phaiThu||0);return Object(b.a)(Object(b.a)({},e),{},{tongTien:n,chietKhau:a,phaiThu:i})}),{tong:"T\u1ed5ng ti\u1ec1n",tongTien:0,chietKhau:0,phaiThu:0})}),[t]),d=r.a.useMemo((function(){return["tong","tongTien","chietKhau","phaiThu"].map((function(e,t){return Object(R.a)({},t,o[e])}))}),[o]);return Object(N.b)(K.a,{columns:i,dataSource:d})})),A=h.d.doanhThuOBDModal;t.default=function(){var e,t,n=Object(c.b)(),i=Object(c.c)((function(e){return e.doanhThuOBD})),h=i.tabsData,b=i.loading,m=i.pageSize,g=i.doanhThuOBDs,O=Object(c.c)((function(e){var t;return null===(t=e.tagsPage)||void 0===t?void 0:t[A]})),v=Object(c.c)((function(e){return e.account})).accountData,j=null===v||void 0===v||null===(e=v.paths)||void 0===e||null===(t=e.doanhThuOBD)||void 0===t?void 0:t.edit,D=Object(M.b)(),C=Object(a.a)(D,2),I=C[0],R=C[1],K=Object(T.a)({Instance:x.a,onPending:w.e,addSelectedId:w.a});return r.a.useEffect((function(){return n(Object(w.c)(I)),function(){Object(S.i)("doanhThuOBD")}}),[I]),Object(N.c)("div",{className:"doanhThuOBD-page",css:s.a,children:[Object(N.b)(l.b,{className:"tabs",options:h,activeKey:O?"aside":"",onTabClick:function(e){if("add"===e&&j){if(!j)return Object(y.f)();var t=new x.a;n(Object(u.c)({modalId:A,data:t.initData}))}else"aside"===e?n(Object(d.b)({tagPageId:A})):"taiExcel"===e&&n(Object(o.b)({tableId:A,constants:f,fileSheet:"doanhThuOBDSheet",fileName:"doanhThuOBDName"}))}}),Object(N.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[O&&Object(N.b)(B,{dateTimePicker:R}),Object(N.b)("div",{className:"aside-main",children:Object(N.b)(p.a,{isEdit:j,constants:f,actions:K,datas:g,loading:b,modalId:A,expandable:{expandedRowRender:function(e){return Object(N.b)("div",{children:e.id})},expandRowByClick:!1},isSelection:!1,pagination:!0,pageSize:m,onChange:function(e){n(Object(w.f)(e.pageSize))},summary:function(e){return Object(N.b)(F,{pageData:e})}})})]}),Object(N.b)(k,{})]})}},751:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(35),i=n(9),r={tongDoanhThu:{id:"tongDoanhThu",name:"T\u1ed5ng doanh thu",width:130,className:"text-small font-weight-bold text-danger",align:"right",render:i.numberRender},ngay:{id:"ngay",name:"Ng\xe0y",width:80,className:"text-small font-weight-bold",align:"center",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},thu:{id:"thu",name:"Thu",width:100,className:"text-small font-weight-bold text-success",align:"right",form:{type:"input-number-format"},render:i.numberRender},chi:{id:"chi",name:"Chi",width:100,align:"right",className:"text-small font-weight-bold text-danger",form:{type:"input-number-format"},render:i.numberRender},conLai:{id:"conLai",name:"C\xf2n l\u1ea1i",width:100,align:"right",className:"text-small font-weight-bold",render:i.numberRender},dienGiai:{id:"dienGiai",name:"Di\u1ec5n gi\u1ea3i",width:200,className:"text-small",isSearch:!0,form:{type:"text-area"}},getTableColumns:function(){return[a.a.stt,a.a.active,a.a.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[a.a.active]}}}}]);