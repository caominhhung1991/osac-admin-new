(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[16],{641:function(e,a,t){"use strict";function n(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}t.d(a,"a",(function(){return n}))},642:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(0),c=(t(295),t(146)),o=(t(74),t(197),t(114),t(212),t(294),t(320),function(e,a){var t=arguments;if(null==a||!c.d.call(a,"css"))return n.createElement.apply(void 0,t);var o=t.length,i=new Array(o);i[0]=c.a,i[1]=Object(c.c)(e,a);for(var l=2;l<o;l++)i[l]=t[l];return n.createElement.apply(null,i)})},643:function(e,a,t){"use strict";var n=t(30),c=t(43),o=t(641),i=t(0),l=t.n(i),r=t(53),d=t(13),s=t(319),u=t(14),b=["modalId","constants","actions","datas","loading","isSelection","form"];a.a=function(e){var a=e.modalId,t=e.constants,i=e.actions,m=e.datas,f=e.loading,h=e.isSelection,g=e.form,v=Object(o.a)(e,b),O=Object(r.b)(),j=Object(r.c)((function(e){return e.table})).selectedRowKeys,p=l.a.useMemo((function(){var e={};return h?e.rowSelection={selectedRowKeys:j[a||""]||[],onChange:function(e,t){O(Object(s.d)({tableId:a,selectedRowKeys:e,selectedRows:t}))}}:delete e.rowSelection,e}),[h,j]);function y(e,a){var t={id:e.id,active:a};O(null===i||void 0===i?void 0:i.onActiveAsync(t))}function w(e){O(null===i||void 0===i?void 0:i.onDeleteAsync(e))}var N=Object(d.useSearchText)(),D=Object(c.a)(N,3),T=D[0],V=D[1],C=D[2],I=l.a.useMemo((function(){return Object(d.getTableColumns)(t,{onActiveItem:y,onDeleteItem:w,searchText:T,searchInput:C,setSearchText:V,modalId:a,constants:t,form:g})}),[T]),M=l.a.useMemo((function(){var a=Object.values(m||{});return(null===e||void 0===e?void 0:e.onCallbackDataSource)&&(a=e.onCallbackDataSource(a)),a}),[m]);return Object(u.b)("div",{className:"table",children:Object(u.b)(d.MyTable,Object(n.a)(Object(n.a)(Object(n.a)({},p),v),{},{rowKey:"id",height:"100%",loading:f,columns:I,dataSource:M}))})}},666:function(e,a,t){"use strict";t.d(a,"a",(function(){return h}));var n=t(43),c=t(0),o=t.n(c),i=t(38),l=t.n(i),r=t(405),d=t(204),s=t(198),u=t(167),b=t(217),m=t(14),f=function(e){var a=e||{},t=a.disabledDate,i=a.editabledDate,s=a.className,f=a.defaultTime,h=void 0===f?l()():f,g=a.disabled,v=Object(c.useState)(h),O=Object(n.a)(v,2),j=O[0],p=O[1],y=Object(c.useState)((function(){return Object(u.b)(h)})),w=Object(n.a)(y,2),N=w[0],D=w[1],T=o.a.useMemo((function(){return null===i||void 0===i?void 0:i(j)}),[j,i]);function V(e){var a=Object(u.b)(e);D(a),p(e)}var C=function(e){var a=e.label,n=e.format,c=e.width,o=e.picker;return Object(m.b)(r.a.Item,{label:a,children:Object(m.b)(d.a,{locale:b.a,style:{width:c},format:n,picker:o,value:j,onChange:V,disabledDate:t,disabled:g,className:s})})};return[j,{getDayRender:function(){return C({picker:"date",label:"Ng\xe0y: ",format:"DD/MM/YY",width:"110px"})},getMonthRender:function(){return C({picker:"month",label:"Th\xe1ng: ",format:"MM/YYYY",width:"110px"})},isEditabledDate:T,selectedTime:j,yearAndDayOfYear:N,getDayOfAll:function(){return null===N||void 0===N?void 0:N.dayOfAll},onUpdate:V}]};f.defaultProps={disabledDate:s.noop,width:"105px",format:"DD/MM/YY",className:"",defaultTime:l()(),disabled:!1};var h=f},709:function(e,a,t){"use strict";var n=t(0),c=t.n(n),o=t(13),i=t(53),l=t(328),r=t(14);a.a=function(e){var a=e.form,t=Object(i.b)(),n=Object(i.c)((function(e){return e.caLamViec})).caLamViecs,d=c.a.useMemo((function(){return Object.values(n||{}).map((function(e){var a=e.caLamViecName;return{value:e.id,label:a}}))}),[n]);var s=Object(r.b)(o.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{showSearch:!0,allowClear:!0,filterOption:o.onSelectSearch,onChange:function(e){t(Object(l.addSelectedId)(e))}},options:d});return a?Object(r.b)(o.MyForm,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:s}):s}},711:function(e,a,t){"use strict";var n=t(645);t.d(a,"a",(function(){return n.a}));var c=t(666);t.d(a,"b",(function(){return c.a}))},900:function(e,a,t){"use strict";t.r(a);var n=t(6),c=t.n(n),o=t(11),i=t(30),l=t(9),r=t(43),d=t(0),s=t.n(d),u=t(53),b=t(711),m=t(161),f=t(145),h=t(95),g=t(405),v=t(407),O=t(86),j=t(296),p=t(646),y=t(42),w=t(644),N=t(643),D=t(645),T=t(319),V=t(211),C=t(322),I=t(13),M=t(115),x=t(68),L=t(169),S=t(116),F={congNgay:{id:"congNgay",name:"C\xf4ng ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},congTangCaNgay:{id:"congTangCaNgay",name:"T\u0103ng ca",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},hoTroXang:{id:"hoTroXang",name:"HT x\u0103ng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},lyDoVang:{id:"lyDoVang",name:"L\xfd do v\u1eafng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"select",options:[{label:"NP",value:"NP"},{label:"KP",value:"KP"},{label:"CG",value:"CG"}]}},getTableColumns:function(){return[y.a.stt,M.b.maNV,x.a.hoTen,S.a.chucVuName,L.a.caLamViecName,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang,y.a.capNhatRow]},getInputFields:function(){return[this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]},getExcelFields:function(){return[M.b.maNV,x.a.hoTen,M.b.boPhanId,S.a.chucVuName,L.a.caLamViecName,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]}},k={tong:{id:"tong",name:"T\u1ed5ng",width:70,className:"text-small font-weight-bold",align:"center"},diLam:{id:"diLam",name:"\u0110i l\xe0m",width:70,className:"text-small font-weight-bold",align:"center"},vang:{id:"vang",name:"v\u1eafng",width:70,className:"text-small font-weight-bold",align:"center"},getTableColumns:function(){return[Object(i.a)(Object(i.a)({},L.a.caLamViecName),{},{fixed:!1}),this.tong,this.diLam,this.vang]},getInputFields:function(){return[]}},P=t(350),K=t(709),R=t(14),A=y.b.diemDanhModal,E=function(e){var a,t=e.selectedTime,n=Object(j.useForm)(),o=Object(r.a)(n,1)[0],d=Object(j.useForm)(),b=Object(r.a)(d,1)[0],m=Object(u.b)(),f=Object(u.c)((function(e){return e.form})),h=f.modal,g=f.datas,v=Object(u.c)((function(e){return e.caLamViec})).caLamViecs,O=s.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[A])||void 0===e?void 0:e.open)}),[null===(a=h[A])||void 0===a?void 0:a.open]),p=null===g||void 0===g?void 0:g[A];function y(){return(y=Object(l.a)(c.a.mark((function e(){var a,n,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,b.validateFields();case 3:return n=e.sent,o=null===n||void 0===n?void 0:n.caLamViecId,l=null===v||void 0===v||null===(a=v[o])||void 0===a?void 0:a.caLamViecName,e.next=8,m(Object(P.e)({selectedTime:t,diemDanhData:Object(i.a)(Object(i.a)({},n),{},{caLamViecName:l,id:p.id})}));case 8:e.sent&&m(V.a({modalId:A}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.useEffect((function(){var e=null===g||void 0===g?void 0:g[A];e?(o.setFieldsValue(e),b.setFieldsValue(e)):(o.resetFields(),b.resetFields())}),[p]);var w=[M.b.maNV,x.a.hoTen];return Object(R.c)(I.MyModal,{title:"\u0110i\u1ec3m Danh",visible:O,onClose:function(){m(V.a({modalId:A}))},onOkModal:function(){return y.apply(this,arguments)},width:700,modalId:A,datas:g,children:[Object(R.b)(I.MyForm,{form:o,options:Object(I.getFormItemFields)(w),labelCol:{span:8},wrapperCol:{span:16}}),Object(R.b)(I.MyForm,{form:b,options:Object(I.getFormItemFields)(F.getInputFields()),labelCol:{span:8},wrapperCol:{span:16}}),Object(R.b)(K.a,{form:b})]})},Y=y.b.thongKeDiemDanhModal,X=function(e){var a,t=e.datas,n=Object(u.b)(),c=Object(u.c)((function(e){return e.form})).modal,l=Object(u.c)((function(e){return e.caLamViec})).caLamViecs,r=s.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[Y])||void 0===e?void 0:e.open)}),[null===(a=c[Y])||void 0===a?void 0:a.open]),d=s.a.useMemo((function(){return r?Object.values(t).reduce((function(e,a){var t=a.caLamViecId,n=a.congNgay,c=a.congTangCaNgay,r=null===l||void 0===l?void 0:l[t||""],d=(null===e||void 0===e?void 0:e[t])||{},s=(null===d||void 0===d?void 0:d.tong)||0,u=(null===d||void 0===d?void 0:d.diLam)||0,b=n||c?1:0,m=(null===d||void 0===d?void 0:d.vang)||0,f=n||c?0:1;return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,Object(i.a)(Object(i.a)({},r),{},{tong:s+1,diLam:u+b,vang:m+f})))}),{}):{}}),[r,t,l]);return Object(R.b)(I.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:r,onClose:function(){return n(V.a({modalId:Y}))},width:700,modalId:Y,datas:t,children:Object(R.b)(N.a,{scroll:{x:500},constants:k,datas:d,pagination:!1})})},W=t(191),G=t(167),H=t(25),J=y.b.diemDanhModal;a.default=function(){var e,a,t=Object(u.b)(),n=Object(j.useForm)(),d=Object(r.a)(n,1)[0],M=Object(b.b)(),x=Object(r.a)(M,2),L=x[0],S=x[1];s.a.useEffect((function(){d.setFieldsValue({congNgay:1}),t(C.h())}),[]),s.a.useEffect((function(){return t(Object(P.c)(L)),function(){Object(H.f)()}}),[L]);var k=Object(u.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,boPhans:e.boPhan.boPhans,chucVus:e.chucVu.chucVus,caLamViecs:e.caLamViec.caLamViecs,selectedRows:e.table.selectedRows}})),K=k.nhanSusWorking,A=k.boPhans,Y=k.chucVus,q=k.caLamViecs,B=k.selectedRows,U=Object(u.c)((function(e){return e.diemDanh})),z=U.tabsData,Q=U.loading,Z=U.diemDanhsDay,$=Object(D.a)({Instance:W.a,onPending:P.d,addSelectedId:P.a});function _(){return(_=Object(l.a)(c.a.mark((function e(){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.getFieldsValue(),0!==(n=B[J]||[]).length){e.next=4;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 4:return e.next=6,t(Object(P.f)({selectedTime:L,nhanSuArray:n,noiDungDiemDanhs:a}));case 6:t(Object(T.c)());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=s.a.useMemo((function(){var e=t(Object(C.c)(K,{boPhanId:"quayCom"}));return Object.entries(e).reduce((function(e,a){var t=Object(r.a)(a,2),n=t[0],c=t[1],l=(null===Z||void 0===Z?void 0:Z[n])||{},d=Object(i.a)(Object(i.a)({},c),l);return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},n,d))}),{})}),[K,A,Y,q,Z]);return Object(R.c)("div",{className:"diemDanh-page",css:w.a,children:[Object(R.b)(p.b,{className:"tabs",options:z,activeKey:"all",onTabClick:function(e){"taiExcel"===e?t(Object(T.b)({tableId:J,constants:F,fileSheet:"diemDanhCom",fileName:"diemDanhCom"})):"xemThongKe"===e&&t(Object(V.c)({modalId:y.b.thongKeDiemDanhModal}))}}),Object(R.c)(f.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(R.b)(h.a,{sm:6,md:5,lg:4,children:S.getDayRender()}),Object(R.b)(h.a,{sm:18,md:19,lg:20,children:Object(R.c)(g.a,{layout:"inline",form:d,children:[Object(R.b)(g.a.Item,{name:F.congNgay.id,children:Object(R.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(R.b)(g.a.Item,{name:F.congTangCaNgay.id,children:Object(R.b)(v.a,{placeholder:"T\u0103ng ca",min:0})}),Object(R.b)(g.a.Item,{name:F.hoTroXang.id,children:Object(R.b)(v.a,{placeholder:"HT x\u0103ng",min:0,step:2e4,parser:G.a.parser,formatter:G.a.formatter})}),Object(R.b)(g.a.Item,{name:F.lyDoVang.id,children:Object(R.b)(O.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(e=F.lyDoVang)||void 0===e||null===(a=e.form)||void 0===a?void 0:a.options)||[],allowClear:!0})}),Object(R.b)(I.MyButton,{onClick:function(){return _.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(R.b)("div",{className:"tabs-main",children:Object(R.b)("div",{className:"aside-main",children:Object(R.b)(N.a,{constants:F,actions:$,datas:ee,loading:Q,modalId:J,isSelection:!0})})}),Object(R.b)(E,{selectedTime:L}),Object(R.b)(X,{datas:ee})]})}}}]);