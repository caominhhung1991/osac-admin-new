(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[56],{986:function(n,a,e){"use strict";e.r(a);var t=e(3),o=e.n(t),i=e(13),c=e(15),g=e(8),u=e(35),h=e(0),r=e.n(h),d=e(48),l=e(190),b=e(376),s=e(189),T=e(374),m=e(34),C=e(247),j=e(76),O=e(53),p=e(102),N=e(73),f=e(99),v=e(138),y={ghiChuTinhLuongThang:{id:"ghiChuTinhLuongThang",name:"Ghi ch\xfa",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"text-area"}},inputNumber:{id:"inputNumber",name:"Input number",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},time:{id:"time",name:"Time",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[m.a.stt,j.b.maNV,O.a.hoTen,Object(c.a)(Object(c.a)({},p.a.tenChucVu),{},{width:100}),j.b.ngayVaoLam,j.b.tiengLamViec,N.a.tenCaLamViec,f.a.luongCoBan,f.a.luongTrachNhiem,f.a.luongChuyenCan,f.a.luongPhuCapDienThoaiChucVu,f.a.luongPhuCapDem,f.a.tongLuongThang,f.a.tongLuongNgayCB,v.a.tongCongNgayThuong,v.a.tongNgayHuongLeTet,v.a.tongCongNgayLeTet,v.a.tongCongNgay,v.a.tongGioTangCaThuong,v.a.tongGioTangCaNgayLe,v.a.tongCongTangCaNgay,f.a.tongNhanLuongNgayThuong,f.a.tongNhanNgayNghiLeTet,f.a.tongNhanLuongNgayNghiLeTet,f.a.tongNhanLuongTangCaThuong,f.a.tongNhanLuongTangCaLeTet,f.a.luongNhanChuyenCan,f.a.luongNhanPhuCapDienThoaiChucVu,f.a.luongNhanPhuCapDem,f.a.tongHoTroXang,f.a.phuCapKhac,f.a.tongCongLuong,f.a.truDongPhucTheKhac,f.a.truBaoHiemXaHoi,f.a.tongLuongNhanThang,f.a.truTamUng,f.a.tongLuongThucNhan,this.ghiChuTinhLuongThang]},getInputFields:function(){return[f.a.phuCapKhac,f.a.truDongPhucTheKhac,f.a.truBaoHiemXaHoi,f.a.truTamUng,this.ghiChuTinhLuongThang]},getExcelFields:function(){return this.getTableColumns()}},L=e(375),w=e(365),I=e(246),x=e(417),k=e(61),D=e(497),P=e(69),M=e(490),V=e(11),H=e(388),S=e(14),B=m.b.tinhLuongThang,F=function(n){var a=n.modalId,e=Object(d.b)(),t=Object(d.c)((function(n){return n.form})),o=t.modal,i=t.datas,c=Object(d.c)((function(n){return n.hideColumns})),g=r.a.useMemo((function(){return a||B}),[a]),u=null===c||void 0===c?void 0:c[g],h=r.a.useMemo((function(){var n;return!!(null===o||void 0===o||null===(n=o[B])||void 0===n?void 0:n.open)}),[o[B]]);var l=r.a.useMemo((function(){return y.getTableColumns()}),[]);return Object(S.b)(V.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:h,onClose:function(){e(s.a({modalId:B}))},width:600,modalId:g,datas:i,children:Object(S.b)(M.b,{dataSource:l,renderItem:function(n){return Object(S.c)(M.b.Item,{className:(null===u||void 0===u?void 0:u[n.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){e(Object(H.b)({tableId:g,columnId:n.id}))},children:[Object(S.b)(M.b.Item.Meta,{title:n.name}),Object(S.b)("div",{children:n.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},K=function(n){var a,e=n.dateTimePicker,t=Object(d.b)(),o=Object(d.c)((function(n){return n.ngayNghiLeTet})).ngayNghiLeTetTrongThang,i=Object(d.c)((function(n){return n.time})).soNgayLamViecTrongThang;return Object(S.c)(S.a,{children:[Object(S.b)(T.a,{header:Object(S.b)("div",{className:"font-weight-bold",children:Object(S.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(S.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(S.b)("div",{children:(null===e||void 0===e||null===(a=e.getMonthRender)||void 0===a?void 0:a.call(e))||null}),Object(S.b)("div",{children:Object(S.b)(k.a,{type:"primary",icon:Object(S.b)(D.a,{}),onClick:function(){return t(Object(s.c)({modalId:m.b.tinhLuongThang}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})}),Object(S.b)("div",{style:{marginTop:"10px"},children:Object(S.c)("div",{className:"font-weight-bold",children:["S\u1ed1 ng\xe0y l\xe0m vi\u1ec7c trong th\xe1ng: ",i]})}),Object(S.c)("div",{style:{marginTop:"10px"},children:[Object(S.b)("div",{className:"font-weight-bold",children:"Ng\xe0y Ngh\u1ec9 L\u1ec5, T\u1ebft trong th\xe1ng:"}),o&&o.map((function(n){var a=n.id,e=n.ngay,t=n.tenNgay,o=n.mucNhan;return Object(S.c)("div",{children:[e,": ",t," x ",o]},a)}))]})]}),footer:Object(S.b)("div",{children:Object(S.b)(k.a,{icon:Object(S.b)(P.a,{}),onClick:function(){t(Object(b.b)({tagPageId:m.d.tinhLuongThangModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(S.b)(F,{modalId:m.d.tinhLuongThangModal})]})},G=e(45),X=e(92),E=e(382),R=e(405),U=e(17),q=e(253),z=e(459),J=e(168);var W=function(n){var a=n.record,e=n.selectedTime,t=Object(d.b)(),i=Object(J.useForm)(),h=Object(u.a)(i,1)[0];function l(){return(l=Object(g.a)(o.a.mark((function n(){var i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.validateFields();case 2:i=n.sent,t(Object(x.e)(e,Object(c.a)(Object(c.a)({},a),i)));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.useEffect((function(){h.setFieldsValue(a)}),[a]),Object(S.c)("div",{children:[Object(S.b)(V.MyForm,{labelCol:{span:4},wrapperCol:{span:18},options:Object(V.getFormItemFields)(y.getInputFields()),form:h}),Object(S.b)("div",{children:Object(S.b)(k.a,{type:"primary",onClick:function(){return l.apply(this,arguments)},children:"C\u1eadp nh\u1eadt"})})]})},A=m.d.tinhLuongThangModal;a.default=function(){var n,a,e=Object(d.b)(),t=Object(d.c)((function(n){return n.time})).soNgayLamViecTrongThang,h=Object(d.c)((function(n){return n.ngayNghiLeTet})).soNgayNghiLeTetTrongThang,m=Object(d.c)((function(n){return n.diemDanhThang})).tongHopDiemDanhThangs,j=Object(d.c)((function(n){return n.nhanSu})).nhanSusWorking,O=Object(d.c)((function(n){return n.salary})).salaries,p=Object(d.c)((function(n){return n.tinhLuongThang})),N=p.tabsData,f=p.loading,v=p.pageSize,k=p.tinhLuongThangs,D=Object(d.c)((function(n){var a;return null===(a=n.tagsPage)||void 0===a?void 0:a[A]})),P=Object(d.c)((function(n){return n.account})).accountData,M=null===P||void 0===P||null===(n=P.paths)||void 0===n||null===(a=n.tinhLuongThang)||void 0===a?void 0:a.edit,V=Object(I.a)({Instance:w.a,onPending:x.d,addSelectedId:x.a}),H=Object(E.b)({}),B=Object(u.a)(H,2),F=B[0],J=B[1];function Q(){return(Q=Object(g.a)(o.a.mark((function n(a){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("add"!==a||!M){n.next=7;break}if(M){n.next=3;break}return n.abrupt("return",Object(G.f)());case 3:t=new w.a,e(Object(s.c)({modalId:A,data:t.initData})),n.next=8;break;case 7:"aside"===a?e(Object(b.b)({tagPageId:A})):"taiExcel"===a&&e(Object(l.b)({tableId:A,constants:y,fileSheet:"tinhLuongThangSheet",fileName:"tinhLuongThangName"}));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}r.a.useEffect((function(){return e(Object(R.e)(F)),e(Object(q.d)(F)),e(Object(z.b)(F)),e(Object(x.c)(F)),function(){Object(U.h)("diemDanhThang"),Object(U.h)("tinhLuongThang")}}),[F]);var Y=r.a.useMemo((function(){return Object.values(j).filter((function(n){return"quayCom"===n.boPhanId})).reduce((function(n,a){var e=a.id,o=(a.hoTen,a.tiengLamViec),g=void 0===o?0:o,u=(null===O||void 0===O?void 0:O[e])||{},r=u.luongChuyenCan,d=u.luongPhuCapDem,l=u.luongPhuCapDienThoaiChucVu,b=u.tongLuongNgayCB,s=void 0===b?0:b,T=g?s/g:0,C=(null===k||void 0===k?void 0:k[e])||{},j=C.phuCapKhac,p=void 0===j?0:j,N=C.truDongPhucTheKhac,f=void 0===N?0:N,v=C.truBaoHiemXaHoi,y=void 0===v?0:v,L=C.truTamUng,w=void 0===L?0:L,I=C.ghiChuTinhLuongThang,x=void 0===I?"":I,D=(null===m||void 0===m?void 0:m[e])||{},P=D.tongCongNgayThuong,M=void 0===P?0:P,V=D.tongGioTangCaThuong,H=void 0===V?0:V,S=D.tongCongNgayLeTet,B=void 0===S?0:S,F=D.tongGioTangCaNgayLe,K=void 0===F?0:F,G=D.tongCongNgay,X=void 0===G?0:G,E=D.tongHoTroXang,R=void 0===E?0:E,U=D.tongCongTangCaNgay,q=void 0===U?0:U,z=Math.round(M*s),J=Math.round((h||0)*s),W=Math.round(B*s),A=Math.round(T*H),Q=Math.round(T*K),Y=X>0?t/X:0,Z=X>=t?r:0,$=X>=20?l:0,_=t>=X?d:Math.round((d||0)*Y),nn=z+J+W+Z+$+_+A+Q+p,an=nn-f-y,en=an-w,tn=Object(c.a)(Object(c.a)(Object(c.a)({},a),u),{},{luongTiengLamViec:T,tongCongNgayThuong:M,tongCongNgayLeTet:B,tongCongNgay:X,tongGioTangCaThuong:H,tongGioTangCaNgayLe:K,tongCongTangCaNgay:q,tongHoTroXang:R,tongNhanLuongNgayThuong:z,tongNhanNgayNghiLeTet:J,tongNhanLuongNgayNghiLeTet:W,tongNhanLuongTangCaThuong:A,tongNhanLuongTangCaLeTet:Q,luongNhanChuyenCan:Z,luongNhanPhuCapDienThoaiChucVu:$,luongNhanPhuCapDem:_,phuCapKhac:p,tongCongLuong:nn,tongNgayHuongLeTet:h,truDongPhucTheKhac:f,truBaoHiemXaHoi:y,truTamUng:w,ghiChuTinhLuongThang:x,tongLuongNhanThang:an,tongLuongThucNhan:en});return Object(c.a)(Object(c.a)({},n),{},Object(i.a)({},e,tn))}),{})}),[j,O,m,h,t,k]);return Object(S.c)("div",{className:"tinhLuongThang-page",css:C.a,children:[Object(S.b)(T.b,{className:"tabs",options:N,activeKey:D?"aside":"",onTabClick:function(n){return Q.apply(this,arguments)}}),Object(S.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[D&&Object(S.b)(K,{dateTimePicker:J}),Object(S.b)("div",{className:"aside-main",children:Object(S.b)(L.a,{isEdit:M,constants:y,actions:V,datas:Y,loading:f,modalId:A,expandable:{expandedRowRender:function(n){return Object(S.b)(W,{selectedTime:F,record:n})},expandRowByClick:!1},isSelection:!0,pagination:!0,pageSize:v,onChange:function(n){e(Object(x.f)(n.pageSize))},onRow:function(n){return{onClick:function(){console.log(n)}}},onCallbackDataSource:function(n){return Object(X.orderBy)(n,["tenCaLamViec","tenBoPhan","tenChucVu","maNV"])}})})]})]})}}}]);