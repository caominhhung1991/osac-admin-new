(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[57],{1032:function(e,n,t){"use strict";t.r(n);var a=t(14),c=t(13),i=t(0),u=t.n(i),d=t(48),o=t(193),b=t(194),r=t(248),l=t(380),g=t(35),s=t(249),h=t(765),j=t(760),O=t(366),p=t(255),f={getTableColumns:function(){return[Object(c.a)(Object(c.a)({},g.a.stt),{},{fixed:!1}),O.a.tenNguyenLieu,Object(c.a)(Object(c.a)({},h.a.tenDonViTinh),{},{align:"center"}),p.a.tenNhomNguyenLieu,Object(c.a)(Object(c.a)({},j.a.tenNhaCungCap),{},{fixed:!1,name:"T\xean NCC \u0111\u1eb7t h\xe0ng",width:150}),Object(c.a)(Object(c.a)({},O.a.giaNguyenLieu),{},{name:"Gi\xe1 \u0111\u1eb7t h\xe0ng"}),g.a.active,g.a.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[g.a.id,O.a.tenNguyenLieu,h.a.tenDonViTinh,p.a.nhomNguyenLieuId,p.a.tenNhomNguyenLieu,j.a.nhaCungCapId,j.a.tenNhaCungCap,O.a.giaNguyenLieu]}},v=t(381),C=t(852),m=t(185),y=t(400),N=t(42),L=t(382),I=t(93),D=t(32),x=t(3),T=t.n(x),k=t(7),w=t(34),S=t(494),R=t(60),E=t(168),F=t(71),M=t(17),A=t(252),P=t(384),V=t(743),z=t(792),B=t(415),G=t(15),J=g.d.nguyenLieuModal,K=function(){var e,n,t=Object(d.b)(),a=Object(d.c)((function(e){return e.account})).isDev,c=Object(d.c)((function(e){return e.diaDiem})),i=c.diaDiemId,o=c.diaDiems,r=Object(d.c)((function(e){return e.nhaCungCap})),s=r.nhaCungCapId,h=r.nhaCungCaps,j=(Object(d.c)((function(e){return e.nguyenLieu})).nguyenLieus,Object(d.c)((function(e){return e.table})).selectedRows),O=Object(E.useForm)(),p=Object(w.a)(O,1)[0],f=u.a.useMemo((function(){return 0!==((null===j||void 0===j?void 0:j[J])||[]).length&&s}),[j,s]),v=Object(d.c)((function(e){return e.account})).accountData,C=null===v||void 0===v||null===(e=v.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit;function m(){return(m=Object(k.a)(T.a.mark((function e(){var n,a,c,u,d,r,l,g,O;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===o||void 0===o?void 0:o[i])||{},a=n.tenDiaDiem,c=(null===h||void 0===h?void 0:h[s])||{},u=c.tenNhaCungCap,C){e.next=4;break}return e.abrupt("return",Object(N.f)());case 4:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt c\xe1c nguy\xean li\xeau th\xe0nh nh\xe0 cung c\u1ea5p ".concat(u," \u0111ang \u0111\u1eb7t h\xe0ng t\u1ea1i \u0111\u1ecba \u0111i\u1ec3m ").concat(a))){e.next=6;break}return e.abrupt("return");case 6:Object(M.h)("giaNguyenLieuTheoDiaDiem"),d=(null===j||void 0===j?void 0:j[J])||[],r=Object(D.a)(d),e.prev=9,r.s();case 11:if((l=r.n()).done){e.next=20;break}return g=l.value,O={id:g.id,nhaCungCapId:s},e.next=16,t(Object(A.c)(O));case 16:O=e.sent,t(Object(B.h)(O,i));case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:t(Object(b.d)({tableId:J,selectedRowKeys:[],selectedRows:[]})),t(Object(B.d)(i)),Object(N.e)();case 31:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})))).apply(this,arguments)}return u.a.useEffect((function(){console.log(i,"diaDiemId"),t(Object(B.d)(i))}),[i]),u.a.useEffect((function(){var e=localStorage.getItem("nhaCungCapId")||"",n=localStorage.getItem("diaDiemId")||"";t(Object(A.a)(e)),t(Object(P.a)(n)),p.setFieldsValue({nhaCungCapId:e,diaDiemId:n})}),[]),Object(G.b)(G.a,{children:Object(G.b)(l.a,{header:Object(G.b)("div",{className:"font-weight-bold",children:Object(G.b)("span",{children:"Th\xf4ng Tin Trang"})}),body:Object(G.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(G.c)(S.a,{form:p,children:[Object(G.b)(V.a,{isDanhSachNL:!0,onAfterSelect:function(e){p.setFieldsValue({nhaCungCapId:""}),t(Object(A.a)(""))}}),Object(G.b)(z.a,{isAddNew:!0,isTrangQuanLy:!0,diaDiemId:i,onAfterSelect:function(e){console.log(e,"nhaCungCapId")}})]}),Object(G.b)("div",{style:{marginTop:"10px"},children:Object(G.b)(R.a,{disabled:!f,type:"primary",onClick:function(){return m.apply(this,arguments)},children:"C\u1eadp nh\u1eadt nh\xe0 cung c\u1ea5p"})}),a&&Object(G.b)("div",{style:{marginTop:"10px"},children:Object(G.b)("button",{onClick:function(){Object(M.g)(),t(Object(y.h)())},children:"cap nhat gia vs ncc cho dau giay"})}),a&&Object(G.b)("div",{style:{marginTop:"10px"},children:Object(G.b)("button",{onClick:function(){Object(M.g)(),t(Object(y.i)())},children:"cap nhat NCC Thi\xean H\u01b0ng Th\u1ecbnh"})}),a&&Object(G.b)("div",{style:{marginTop:"10px"},children:Object(G.b)("button",{onClick:function(){Object(M.g)(),t(Object(y.k)())},children:"X\xf3a gi\xe1 NL v\xe0 NCC trong nguy\xean li\u1ec7u"})}),a&&Object(G.b)("div",{style:{marginTop:"10px"},children:Object(G.b)("button",{onClick:function(){Object(M.g)(),t(Object(y.g)())},children:"T\u1ed5ng h\u1ee3p nguy\xean li\u1ec7u c\xf3 trong m\xf3n \u0103n"})})]}),footer:Object(G.b)("div",{children:Object(G.b)(R.a,{icon:Object(G.b)(F.a,{}),onClick:function(){t(Object(L.b)({tagPageId:g.d.nguyenLieuModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},X=g.d.nguyenLieuModal;n.default=function(){var e,n,t=Object(d.b)(),i=Object(d.c)((function(e){return e.nguyenLieu})),g=i.tabsData,h=i.loading,j=i.pageSize,O=i.nguyenLieus,p=Object(d.c)((function(e){return e.nhaCungCap})).nhaCungCaps,D=Object(d.c)((function(e){return e.danhSachGiaNL})).giaNguyenLieuTheoDiaDiemDatas,x=Object(d.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[X]})),T=Object(d.c)((function(e){return e.account})).accountData,k=null===T||void 0===T||null===(e=T.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit,w=Object(r.a)({Instance:m.a,onPending:y.f,addSelectedId:y.a});var S=u.a.useMemo((function(){return Object.values(O).reduce((function(e,n){var t=n.id,i=(null===D||void 0===D?void 0:D[t])||{},u=i.tenNhaCungCap,d=i.nhaCungCapId,o=i.giaNguyenLieu;if(o&&!u){var b=(null===p||void 0===p?void 0:p[d])||{};console.log(n.tenNguyenLieu,d,b.tenNhaCungCap)}var r=Object(c.a)(Object(c.a)({},n),{},{nhaCungCapId:d,tenNhaCungCap:u,giaNguyenLieu:o});return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,r))}),{})}),[O,D]);return Object(G.c)("div",{className:"nguyenLieu-page",css:s.a,children:[Object(G.b)(l.b,{className:"tabs",options:g,activeKey:x?"aside":"",onTabClick:function(e){if("add"===e){if(!k)return Object(N.f)();var n=new m.a;t(Object(o.c)({modalId:X,data:n.initData}))}else"aside"===e?t(Object(L.b)({tagPageId:X})):"taiExcel"===e&&t(Object(b.b)({tableId:X,constants:f,fileSheet:"nguyenLieuSheet",fileName:"nguyenLieuName",isDownloadAll:!0,datas:S}))}}),Object(G.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[x&&Object(G.b)(K,{}),Object(G.b)("div",{className:"aside-main",children:Object(G.b)(v.a,{constants:f,actions:w,datas:S,loading:h,modalId:X,isEdit:k,isSelection:!0,pagination:!0,pageSize:j,onChange:function(e){t(Object(y.l)(e.pageSize))},expandable:{expandedRowRender:function(e){return Object(G.b)("div",{children:e.id})},expandRowByClick:!0},onCallbackDataSource:function(e){return Object(I.orderBy)(e,["tenNhomNguyenLieu","tenNguyenLieu"])}})})]}),Object(G.b)(C.a,{})]})}}}]);