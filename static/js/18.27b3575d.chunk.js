(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[18],{745:function(e,a,n){"use strict";var t=n(0),c=n.n(t),i=n(10),o=n(47),l=n(361),d=n(12);a.a=function(e){var a=e.form,n=Object(o.b)(),t=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,r=c.a.useMemo((function(){return Object.values(t||{}).map((function(e){var a=e.caLamViecName;return{value:e.id,label:a}}))}),[t]);var s=Object(d.b)(i.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{showSearch:!0,allowClear:!0,filterOption:i.onSelectSearch,onChange:function(e){n(Object(l.addSelectedId)(e))}},options:r});return a?Object(d.b)(i.MyForm,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:s}):s}},928:function(e,a,n){"use strict";n.r(a);var t=n(5),c=n.n(t),i=n(13),o=n(21),l=n(9),d=n(40),r=n(0),s=n.n(r),b=n(47),m=n(369),u=n(109),h=n(154),g=n(98),O=n(443),j=n(445),v=n(90),f=n(158),p=n(348),y=n(39),N=n(234),V=n(349),C=n(233),T=n(180),D=n(179),w=n(351),I=n(10),M=n(122),L=n(71),x=n(186),F=n(123),k=n(157),P={congNgay:{id:"congNgay",name:"C\xf4ng ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},congTangCaNgay:{id:"congTangCaNgay",name:"T\u0103ng ca",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},hoTroXang:{id:"hoTroXang",name:"HT x\u0103ng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},lyDoVang:{id:"lyDoVang",name:"L\xfd do v\u1eafng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"select",options:[{label:"NP",value:"NP"},{label:"KP",value:"KP"},{label:"CG",value:"CG"}]}},gioVao:{id:"gioVao",name:"G. v\xe0o",width:80,className:"text-small",align:"center"},gioRa:{id:"gioRa",name:"G. ra",width:80,className:"text-small",align:"center"},tongGio:{id:"tongGio",name:"T. gi\u1edd",width:80,className:"text-small",align:"center"},getTableColumns:function(){return[y.a.stt,M.b.maNV,L.a.hoTen,k.a.boPhanName,F.a.chucVuName,x.a.caLamViecName,this.gioVao,this.gioRa,this.tongGio,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang,y.a.capNhatRow]},getInputFields:function(){return[this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]},getExcelFields:function(){return[M.b.maNV,L.a.hoTen,M.b.boPhanId,F.a.chucVuName,x.a.caLamViecName,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]}},S={tong:{id:"tong",name:"T\u1ed5ng",width:70,className:"text-small font-weight-bold",align:"center"},diLam:{id:"diLam",name:"\u0110i l\xe0m",width:70,className:"text-small font-weight-bold",align:"center"},vang:{id:"vang",name:"v\u1eafng",width:70,className:"text-small font-weight-bold",align:"center"},getTableColumns:function(){return[Object(o.a)(Object(o.a)({},x.a.caLamViecName),{},{fixed:!1}),this.tong,this.diLam,this.vang]},getInputFields:function(){return[]}},R=n(376),G=n(745),K=n(12),X=y.d.diemDanhModal,E=function(e){var a,n=e.selectedTime,t=Object(f.useForm)(),i=Object(d.a)(t,1)[0],r=Object(f.useForm)(),m=Object(d.a)(r,1)[0],u=Object(b.b)(),h=Object(b.c)((function(e){return e.form})),g=h.modal,O=h.datas,j=Object(b.c)((function(e){return e.caLamViec})).caLamViecs,v=s.a.useMemo((function(){var e;return!!(null===g||void 0===g||null===(e=g[X])||void 0===e?void 0:e.open)}),[null===(a=g[X])||void 0===a?void 0:a.open]),p=null===O||void 0===O?void 0:O[X];function y(){return(y=Object(l.a)(c.a.mark((function e(){var a,t,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,m.validateFields();case 3:return t=e.sent,i=null===t||void 0===t?void 0:t.caLamViecId,l=null===j||void 0===j||null===(a=j[i])||void 0===a?void 0:a.caLamViecName,e.next=8,u(Object(R.h)({selectedTime:n,diemDanhData:Object(o.a)(Object(o.a)({},t),{},{caLamViecName:l,id:p.id})}));case 8:e.sent&&u(D.a({modalId:X}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.useEffect((function(){var e=null===O||void 0===O?void 0:O[X];e?(i.setFieldsValue(e),m.setFieldsValue(e)):(i.resetFields(),m.resetFields())}),[p]);var N=[M.b.maNV,L.a.hoTen],V=P.getInputFields();return Object(K.c)(I.MyModal,{title:"\u0110i\u1ec3m Danh",visible:v,onClose:function(){u(D.a({modalId:X}))},onOkModal:function(){return y.apply(this,arguments)},width:700,modalId:X,datas:O,children:[Object(K.b)(I.MyForm,{form:i,options:Object(I.getFormItemFields)(N),labelCol:{span:8},wrapperCol:{span:16}}),Object(K.b)(I.MyForm,{form:m,options:Object(I.getFormItemFields)(V),labelCol:{span:8},wrapperCol:{span:16}}),Object(K.b)(G.a,{form:m})]})},z=y.d.thongKeDiemDanhModal,B=function(e){var a,n=e.datas,t=Object(b.b)(),c=Object(b.c)((function(e){return e.form})).modal,l=Object(b.c)((function(e){return e.caLamViec})).caLamViecs,d=s.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[z])||void 0===e?void 0:e.open)}),[null===(a=c[z])||void 0===a?void 0:a.open]),r=s.a.useMemo((function(){return d?Object.values(n).reduce((function(e,a){var n=a.caLamViecId,t=a.congNgay,c=a.congTangCaNgay,d=null===l||void 0===l?void 0:l[n||""],r=(null===e||void 0===e?void 0:e[n])||{},s=(null===r||void 0===r?void 0:r.tong)||0,b=(null===r||void 0===r?void 0:r.diLam)||0,m=t||c?1:0,u=(null===r||void 0===r?void 0:r.vang)||0,h=t||c?0:1;return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},n,Object(o.a)(Object(o.a)({},d),{},{tong:s+1,diLam:b+m,vang:u+h})))}),{}):{}}),[d,n,l]);return Object(K.b)(I.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:d,onClose:function(){return t(D.a({modalId:z}))},width:700,modalId:z,datas:n,children:Object(K.b)(V.a,{scroll:{x:500},constants:S,datas:r,pagination:!1})})},W=n(212),H=n(132),J=n(24),q=n(57),A=n(457),Q=n(460),U=n(504),Y=n.n(U),Z=n(452),$=n(362),_=y.b.diemDanh,ee=function(e){var a=e.modalId,n=Object(b.b)(),t=Object(b.c)((function(e){return e.form})),c=t.modal,i=t.datas,o=Object(b.c)((function(e){return e.hideColumns})),l=null===o||void 0===o?void 0:o[y.d.diemDanhModal],d=s.a.useMemo((function(){return a||_}),[a]),r=s.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[_])||void 0===e?void 0:e.open)}),[c[_]]);var m=s.a.useMemo((function(){return P.getTableColumns()}),[]);return Object(K.b)(I.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:r,onClose:function(){n(D.a({modalId:_}))},width:600,modalId:d,datas:i,children:Object(K.b)(Z.b,{dataSource:m,renderItem:function(e){return Object(K.c)(Z.b.Item,{className:(null===l||void 0===l?void 0:l[e.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){n(Object($.b)({tableId:y.d.diemDanhModal,columnId:e.id}))},children:[Object(K.b)(Z.b.Item.Meta,{title:e.name}),Object(K.b)("div",{children:e.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},ae=n(355),ne=function(e){var a,n=e.selectedTime,t=e.dateTimePicker,c=Object(b.b)();return Object(K.c)(K.a,{children:[Object(K.b)(p.a,{header:Object(K.b)("div",{className:"font-weight-bold",children:Object(K.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(K.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(K.b)("div",{children:null===t||void 0===t||null===(a=t.getDayRender)||void 0===a?void 0:a.call(t)}),Object(K.b)("div",{style:{marginBottom:"7px"},children:Object(K.b)(q.a,{type:"primary",icon:Object(K.b)(A.a,{}),onClick:function(){n&&c(Object(R.d)(n,n))},children:"L\u1ea5y g\u1ee3i \xfd \u0111i\u1ec3m danh"})}),Object(K.b)("div",{children:Object(K.b)(q.a,{type:"primary",icon:Object(K.b)(Q.a,{}),onClick:function(){return c(Object(D.c)({modalId:y.b.diemDanh}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})})]}),footer:Object(K.b)("div",{children:Object(K.b)(q.a,{icon:Object(K.b)(Y.a,{}),onClick:function(){c(Object(ae.b)({tagPageId:y.d.diemDanhModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(K.b)(ee,{modalId:y.d.diemDanhModal})]})},te=y.d.diemDanhModal;a.default=function(){var e,a,n=Object(b.b)(),t=Object(f.useForm)(),r=Object(d.a)(t,1)[0],M=Object(m.b)(),L=Object(d.a)(M,2),x=L[0],F=L[1],k=Object(b.c)((function(e){return e.diemDanh})).bamVanTayByMonth,S=Object(b.c)((function(e){var a;return null===(a=e.tagsPage)||void 0===a?void 0:a[te]}));s.a.useEffect((function(){r.setFieldsValue({congNgay:1}),n(w.h())}),[]),s.a.useEffect((function(){return n(Object(R.e)(x)),n(Object(R.c)(x)),function(){Object(J.h)("diemDanhNgay")}}),[x]);var G=Object(b.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,boPhans:e.boPhan.boPhans,chucVus:e.chucVu.chucVus,caLamViecs:e.caLamViec.caLamViecs,selectedRows:e.table.selectedRows}})),X=G.nhanSusWorking,z=G.boPhans,q=G.chucVus,A=G.caLamViecs,Q=G.selectedRows,U=Object(b.c)((function(e){return e.diemDanh})),Y=U.tabsData,Z=U.loading,$=U.diemDanhsDay,_=U.pageSize,ee=Object(C.a)({Instance:W.a,onPending:R.f,addSelectedId:R.a});function ce(){return(ce=Object(l.a)(c.a.mark((function e(){var a,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getFieldsValue(),0!==(t=Q[te]||[]).length){e.next=4;break}return e.abrupt("return",u.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 4:return e.next=6,n(Object(R.i)({selectedTime:x,nhanSuArray:t,noiDungDiemDanhs:a}));case 6:n(Object(T.c)());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=s.a.useMemo((function(){var e=n(Object(w.c)(X,{boPhanId:"quayCom"})),a="ngayQuet"+(null===x||void 0===x?void 0:x.format("DD"));return Object.entries(e).reduce((function(e,n){var t,c=Object(d.a)(n,2),l=c[0],r=c[1],s=(null===k||void 0===k||null===(t=k[l])||void 0===t?void 0:t[a])||{},b=(null===$||void 0===$?void 0:$[l])||{},m=Object(o.a)(Object(o.a)(Object(o.a)({},r),b),s);return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},l,m))}),{})}),[X,z,q,A,$,k,x]);return Object(K.c)("div",{className:"diemDanh-page",css:N.a,children:[Object(K.b)(p.b,{className:"tabs",options:Y,activeKey:"all",onTabClick:function(e){"taiExcel"===e?n(Object(T.b)({tableId:te,constants:P,fileSheet:"diemDanhCom",fileName:"diemDanhCom"})):"aside"===e?n(Object(ae.b)({tagPageId:te})):"xemThongKe"===e&&n(Object(D.c)({modalId:y.d.thongKeDiemDanhModal}))}}),Object(K.c)("div",{className:"tabs-main",children:[S&&Object(K.b)(ne,{dateTimePicker:F,selectedTime:x}),Object(K.c)("div",{className:"aside-main",children:[Object(K.c)(h.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(K.b)(g.a,{sm:6,md:5,lg:4,children:F.getDayRender()}),Object(K.b)(g.a,{sm:18,md:19,lg:20,children:Object(K.c)(O.a,{layout:"inline",form:r,children:[Object(K.b)(O.a.Item,{name:P.congNgay.id,children:Object(K.b)(j.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(K.b)(O.a.Item,{name:P.congTangCaNgay.id,children:Object(K.b)(j.a,{placeholder:"T\u0103ng ca",min:0})}),Object(K.b)(O.a.Item,{name:P.hoTroXang.id,children:Object(K.b)(j.a,{placeholder:"HT x\u0103ng",min:0,step:2e4,parser:H.a.parser,formatter:H.a.formatter})}),Object(K.b)(O.a.Item,{name:P.lyDoVang.id,children:Object(K.b)(v.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(e=P.lyDoVang)||void 0===e||null===(a=e.form)||void 0===a?void 0:a.options)||[],allowClear:!0})}),Object(K.b)(I.MyButton,{onClick:function(){return ce.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(K.b)(V.a,{constants:P,actions:ee,datas:ie,loading:Z,modalId:te,pageSize:_,isSelection:!0,onChange:function(e){n(Object(R.g)(e.pageSize))}})]})]}),Object(K.b)(E,{selectedTime:x}),Object(K.b)(B,{datas:ie})]})}}}]);