(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[21],{749:function(e,n,a){"use strict";var t=a(0),c=a.n(t),i=a(10),o=a(48),l=a(389),d=a(15);n.a=function(e){var n=e.form,a=Object(o.b)(),t=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,r=c.a.useMemo((function(){return Object.values(t||{}).map((function(e){var n=e.tenCaLamViec;return{value:e.id,label:n}}))}),[t]);var u=Object(d.b)(i.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{showSearch:!0,allowClear:!0,filterOption:i.onSelectSearch,onChange:function(e){a(Object(l.addSelectedId)(e))}},options:r});return n?Object(d.b)(i.MyForm,{form:n,labelCol:{span:8},wrapperCol:{span:16},children:u}):u}},762:function(e,n,a){"use strict";var t=a(13),c=a(14),i=a(0),o=a.n(i),l=a(10),d=a(48),r=a(189),u=a(34),b=a(105),s=a(376),m=a(15),h=u.d.thongKeDiemDanhModal;n.a=function(e){var n,a=e.datas,i=Object(d.b)(),u=Object(d.c)((function(e){return e.form})).modal,g=Object(d.c)((function(e){return e.caLamViec})).caLamViecs,O=o.a.useMemo((function(){var e;return!!(null===u||void 0===u||null===(e=u[h])||void 0===e?void 0:e.open)}),[null===(n=u[h])||void 0===n?void 0:n.open]),j=o.a.useMemo((function(){return O?Object.values(a).reduce((function(e,n){var a=n.caLamViecId,i=n.congNgay,o=n.congTangCaNgay,l=null===g||void 0===g?void 0:g[a||""],d=(null===e||void 0===e?void 0:e[a||""])||{},r=(null===d||void 0===d?void 0:d.tong)||0,u=(null===d||void 0===d?void 0:d.diLam)||0,b=i||o?1:0,s=(null===d||void 0===d?void 0:d.vang)||0,m=i||o?0:1;return a?Object(c.a)(Object(c.a)({},e),{},Object(t.a)({},a,Object(c.a)(Object(c.a)({},l),{},{tong:r+1,diLam:u+b,vang:s+m}))):e}),{}):{}}),[O,a,g]);return Object(m.b)(l.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:O,onClose:function(){return i(r.a({modalId:h}))},width:700,modalId:h,datas:a,children:Object(m.b)(s.a,{scroll:{x:500},constants:b.b,datas:j,pagination:!1})})}},990:function(e,n,a){"use strict";a.r(n);var t=a(3),c=a.n(t),i=a(13),o=a(14),l=a(8),d=a(35),r=a(0),u=a.n(r),b=a(48),s=a(383),m=a(121),h=a(165),g=a(110),O=a(483),j=a(485),v=a(101),f=a(61),p=a(168),y=a(375),N=a(34),C=a(249),D=a(376),T=a(248),I=a(190),V=a(189),w=a(148),M=a(10),x=a(74),F=a(55),k=a(103),L=a(134),S={congNgay:{id:"congNgay",name:"C\xf4ng ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},congTangCaNgay:{id:"congTangCaNgay",name:"T\u0103ng ca",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},hoTroXang:{id:"hoTroXang",name:"HT x\u0103ng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"},render:M.numberRender},lyDoVang:{id:"lyDoVang",name:"L\xfd do v\u1eafng",width:95,className:"text-small font-weight-bold",align:"center",isSearch:!0,form:{type:"select",options:[{label:"NP",value:"NP"},{label:"KP",value:"KP"},{label:"CG",value:"CG"}]}},gioVao:{id:"gioVao",name:"G. v\xe0o",width:80,className:"text-small",align:"center"},gioRa:{id:"gioRa",name:"G. ra",width:80,className:"text-small",align:"center"},tongGio:{id:"tongGio",name:"T. gi\u1edd",width:80,className:"text-small",align:"center"},getTableColumns:function(){return[N.a.stt,F.b.maNV,F.b.hoTen,L.a.tenBoPhan,k.a.tenChucVu,x.a.tenCaLamViec,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang,N.a.capNhatRow]},getInputFields:function(){return[this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]},getExcelFields:function(){return[F.b.maNV,F.b.hoTen,F.b.boPhanId,k.a.tenChucVu,x.a.tenCaLamViec,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]}},P=a(423),R=a(749),K=a(43),G=a(15),X=N.d.diemDanhModal,E=function(e){var n,a,t,i=e.selectedTime,r=Object(p.useForm)(),s=Object(d.a)(r,1)[0],m=Object(p.useForm)(),h=Object(d.a)(m,1)[0],g=Object(b.b)(),O=Object(b.c)((function(e){return e.form})),j=O.modal,v=O.datas,f=Object(b.c)((function(e){return e.caLamViec})).caLamViecs,y=Object(b.c)((function(e){return e.account})).accountData,N=null===y||void 0===y||null===(n=y.paths)||void 0===n||null===(a=n.diemDanhNuoc)||void 0===a?void 0:a.edit,C=u.a.useMemo((function(){var e;return!!(null===j||void 0===j||null===(e=j[X])||void 0===e?void 0:e.open)}),[null===(t=j[X])||void 0===t?void 0:t.open]),D=null===v||void 0===v?void 0:v[X];function T(){return(T=Object(l.a)(c.a.mark((function e(){var n,a,t,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return",Object(K.f)());case 2:return!0,e.next=5,h.validateFields();case 5:return a=e.sent,t=null===a||void 0===a?void 0:a.caLamViecId,l=null===f||void 0===f||null===(n=f[t])||void 0===n?void 0:n.tenCaLamViec,e.next=10,g(Object(P.g)({selectedTime:i,diemDanhData:Object(o.a)(Object(o.a)({},a),{},{tenCaLamViec:l,id:D.id})}));case 10:e.sent&&g(V.a({modalId:X}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.useEffect((function(){var e=null===v||void 0===v?void 0:v[X];e?(s.setFieldsValue(e),h.setFieldsValue(e)):(s.resetFields(),h.resetFields())}),[D]);var I=[F.b.maNV,F.b.hoTen],w=S.getInputFields();return Object(G.c)(M.MyModal,{title:"\u0110i\u1ec3m Danh",visible:C,onClose:function(){g(V.a({modalId:X}))},onOkModal:function(){return T.apply(this,arguments)},width:700,modalId:X,datas:v,children:[Object(G.b)(M.MyForm,{form:s,options:Object(M.getFormItemFields)(I),labelCol:{span:8},wrapperCol:{span:16}}),Object(G.b)(M.MyForm,{form:h,options:Object(M.getFormItemFields)(w),labelCol:{span:8},wrapperCol:{span:16}}),Object(G.b)(R.a,{form:h})]})},z=a(225),W=a(17),B=a(499),H=a(527),J=a.n(H),q=a(492),A=a(387),Q=N.b.diemDanhNuoc,U=function(e){var n=e.modalId,a=Object(b.b)(),t=Object(b.c)((function(e){return e.form})),c=t.modal,i=t.datas,o=Object(b.c)((function(e){return e.hideColumns})),l=null===o||void 0===o?void 0:o[N.d.diemDanhModal],d=u.a.useMemo((function(){return n||Q}),[n]),r=u.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[Q])||void 0===e?void 0:e.open)}),[c[Q]]);var s=u.a.useMemo((function(){return S.getTableColumns()}),[]);return Object(G.b)(M.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:r,onClose:function(){a(V.a({modalId:Q}))},width:600,modalId:d,datas:i,children:Object(G.b)(q.b,{dataSource:s,renderItem:function(e){return Object(G.c)(q.b.Item,{className:(null===l||void 0===l?void 0:l[e.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){a(Object(A.b)({tableId:N.d.diemDanhModal,columnId:e.id}))},children:[Object(G.b)(q.b.Item.Meta,{title:e.name}),Object(G.b)("div",{children:e.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},Y=a(377),Z=function(e){e.selectedTime;var n,a=e.dateTimePicker,t=Object(b.b)();return Object(G.c)(G.a,{children:[Object(G.b)(y.a,{header:Object(G.b)("div",{className:"font-weight-bold",children:Object(G.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(G.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(G.b)("div",{children:null===a||void 0===a||null===(n=a.getDayRender)||void 0===n?void 0:n.call(a)}),Object(G.b)("div",{children:Object(G.b)(f.a,{type:"primary",icon:Object(G.b)(B.a,{}),onClick:function(){return t(Object(V.c)({modalId:N.b.diemDanhNuoc}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})})]}),footer:Object(G.b)("div",{children:Object(G.b)(f.a,{icon:Object(G.b)(J.a,{}),onClick:function(){t(Object(Y.b)({tagPageId:N.d.diemDanhModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(G.b)(U,{modalId:N.d.diemDanhModal})]})},$=a(394),_=a(762),ee=N.d.diemDanhNuocModal;n.default=function(){var e,n,a,t,r=Object(b.b)(),M=Object(p.useForm)(),x=Object(d.a)(M,1)[0],F=Object(s.b)(),k=Object(d.a)(F,2),L=k[0],R=k[1],X=Object(b.c)((function(e){return e.diemDanhNuoc})).bamVanTayByMonth,B=Object(b.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[ee]})),H=Object(b.c)((function(e){return e.account})).accountData,J=null===H||void 0===H||null===(e=H.paths)||void 0===e||null===(n=e.diemDanhNuoc)||void 0===n?void 0:n.edit;u.a.useEffect((function(){return r(Object(P.d)(L)),r(Object(P.c)(L)),function(){Object(W.h)("diemDanhNgay")}}),[L]),u.a.useEffect((function(){x.setFieldsValue({congNgay:1}),r(w.k())}),[]);var q=Object(b.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,selectedRows:e.table.selectedRows}})),A=q.nhanSusWorking,Q=q.selectedRows,U=Object(b.c)((function(e){return e.diemDanhNuoc})),ne=U.tabsData,ae=U.loading,te=U.diemDanhsDay,ce=U.pageSize,ie=Object(T.a)({Instance:z.a,onPending:P.e,addSelectedId:P.a});function oe(){return(oe=Object(l.a)(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=2;break}return e.abrupt("return",Object(K.f)());case 2:if(n=x.getFieldsValue(),0!==(a=Q[ee]||[]).length){e.next=6;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 6:return e.next=8,r(Object(P.h)({selectedTime:L,nhanSuArray:a,noiDungDiemDanhNuocs:n}));case 8:r(Object(I.c)());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=u.a.useMemo((function(){var e=r(Object(w.c)(A,{boPhanId:"quayNuoc"})),n="ngayQuet"+(null===L||void 0===L?void 0:L.format("DD")),a=Object.entries(e).reduce((function(e,a){var t,c=Object(d.a)(a,2),l=c[0],r=c[1],u=(null===X||void 0===X||null===(t=X[l])||void 0===t?void 0:t[n])||{},b=(null===te||void 0===te?void 0:te[l])||{},s=Object(o.a)(Object(o.a)(Object(o.a)({},r),b),u);return"725"===r.maNV||"726"===r.maNV||r.maNV,Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},l,s))}),{});return r(Object($.c)()),a}),[A,te,X,L]);return Object(G.c)("div",{className:"diemDanhNuoc-page",css:C.a,children:[Object(G.b)(y.b,{className:"tabs",options:ne,activeKey:"all",onTabClick:function(e){"taiExcel"===e?r(Object(I.b)({tableId:ee,constants:S,fileSheet:"diemDanhCom",fileName:"diemDanhCom"})):"aside"===e?r(Object(Y.b)({tagPageId:ee})):"xemThongKe"===e&&r(Object(V.c)({modalId:N.d.thongKeDiemDanhModal}))}}),Object(G.c)("div",{className:"tabs-main",children:[B&&Object(G.b)(Z,{dateTimePicker:R,selectedTime:L}),Object(G.c)("div",{className:"aside-main",children:[Object(G.c)(h.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(G.b)(g.a,{sm:6,md:5,lg:4,children:R.getDayRender()}),Object(G.b)(g.a,{sm:18,md:19,lg:20,children:Object(G.c)(O.a,{layout:"inline",form:x,children:[Object(G.b)(O.a.Item,{name:S.congNgay.id,children:Object(G.b)(j.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(G.b)(O.a.Item,{name:S.congTangCaNgay.id,children:Object(G.b)(j.a,{placeholder:"T\u0103ng ca",min:0})}),Object(G.b)(O.a.Item,{name:S.hoTroXang.id,children:Object(G.b)(j.a,{placeholder:"HT x\u0103ng",min:0,step:2e4,parser:K.a.parser,formatter:K.a.formatter})}),Object(G.b)(O.a.Item,{name:S.lyDoVang.id,children:Object(G.b)(v.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(a=S.lyDoVang)||void 0===a||null===(t=a.form)||void 0===t?void 0:t.options)||[],allowClear:!0})}),Object(G.b)(f.a,{onClick:function(){return oe.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(G.b)(D.a,{constants:S,actions:ie,datas:le,loading:ae,modalId:ee,pageSize:ce,isSelection:!0,onChange:function(e){r(Object(P.f)(e.pageSize))},pagination:!0})]})]}),Object(G.b)(E,{selectedTime:L}),Object(G.b)(_.a,{datas:le})]})}}}]);