(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[47],{1005:function(e,n,t){"use strict";t.r(n);var a=t(13),c=t(15),i=t(3),u=t.n(i),r=t(8),d=t(0),o=t.n(d),b=t(47),s=t(189),l=t(190),g=t(246),h=t(371),j=t(34),O=t(247),f=t(748),p=t(744),v=t(428),m=t(384),y={getTableColumns:function(){return[Object(c.a)(Object(c.a)({},j.a.stt),{},{fixed:!1}),v.a.tenNguyenLieu,Object(c.a)(Object(c.a)({},f.a.tenDonViTinh),{},{align:"center"}),m.a.tenNhomNguyenLieu,Object(c.a)(Object(c.a)({},p.a.tenNhaCungCap),{},{fixed:!1,name:"T\xean NCC \u0111\u1eb7t h\xe0ng",width:150}),Object(c.a)(Object(c.a)({},v.a.giaNguyenLieu),{},{name:"Gi\xe1 \u0111\u1eb7t h\xe0ng"}),j.a.active,j.a.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[j.a.id,v.a.tenNguyenLieu,f.a.tenDonViTinh,m.a.tenNhomNguyenLieu,p.a.tenNhaCungCap,v.a.giaNguyenLieu]}},C=t(372),N=t(837),L=t(234),I=t(398),D=t(48),x=t(377),w=t(379),S=t(382),T=t(373),k=t(101),E=t(31),F=t(35),M=t(481),V=t(61),P=t(168),R=t(69),z=t(18),A=t(375),q=t(730),G=t(760),J=t(408),K=t(14),B=j.d.nguyenLieuModal,Q=function(){var e,n,t=Object(b.b)(),a=Object(b.c)((function(e){return e.diaDiem})),c=a.diaDiemId,i=a.diaDiems,d=Object(b.c)((function(e){return e.nhaCungCap})),s=d.nhaCungCapId,g=d.nhaCungCaps,O=(Object(b.c)((function(e){return e.nguyenLieu})).nguyenLieus,Object(b.c)((function(e){return e.table})).selectedRows),f=Object(P.useForm)(),p=Object(F.a)(f,1)[0],v=o.a.useMemo((function(){return 0!==((null===O||void 0===O?void 0:O[B])||[]).length&&s}),[O,s]),m=Object(b.c)((function(e){return e.account})).accountData,y=null===m||void 0===m||null===(e=m.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit;function C(){return(C=Object(r.a)(u.a.mark((function e(){var n,a,r,d,o,b,h,j,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===i||void 0===i?void 0:i[c])||{},a=n.tenDiaDiem,r=(null===g||void 0===g?void 0:g[s])||{},d=r.tenNhaCungCap,y){e.next=4;break}return e.abrupt("return",Object(D.f)());case 4:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt c\xe1c nguy\xean li\xeau th\xe0nh nh\xe0 cung c\u1ea5p ".concat(d," \u0111ang \u0111\u1eb7t h\xe0ng t\u1ea1i \u0111\u1ecba \u0111i\u1ec3m ").concat(a))){e.next=6;break}return e.abrupt("return");case 6:Object(z.h)("giaNguyenLieuTheoDiaDiem"),o=(null===O||void 0===O?void 0:O[B])||[],b=Object(E.a)(o),e.prev=9,b.s();case 11:if((h=b.n()).done){e.next=20;break}return j=h.value,f={id:j.id,nhaCungCapId:s},e.next=16,t(Object(w.c)(f));case 16:f=e.sent,t(Object(J.g)(f,c));case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),b.e(e.t0);case 25:return e.prev=25,b.f(),e.finish(25);case 28:t(Object(l.d)({tableId:B,selectedRowKeys:[],selectedRows:[]})),t(Object(J.d)(c)),Object(D.e)();case 31:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})))).apply(this,arguments)}return o.a.useEffect((function(){console.log(c,"diaDiemId"),t(Object(J.d)(c))}),[c]),o.a.useEffect((function(){var e=localStorage.getItem("nhaCungCapId")||"",n=localStorage.getItem("diaDiemId")||"";t(Object(w.a)(e)),t(Object(A.a)(n)),p.setFieldsValue({nhaCungCapId:e,diaDiemId:n})}),[]),Object(K.b)(K.a,{children:Object(K.b)(h.a,{header:Object(K.b)("div",{className:"font-weight-bold",children:Object(K.b)("span",{children:"Th\xf4ng Tin Trang"})}),body:Object(K.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(K.c)(M.a,{form:p,children:[Object(K.b)(q.a,{isDanhSachNL:!0,onAfterSelect:function(e){p.setFieldsValue({nhaCungCapId:""}),t(Object(w.a)(""))}}),Object(K.b)(G.a,{isAddNew:!0,isTrangQuanLy:!0,diaDiemId:c,onAfterSelect:function(e){console.log(e,"nhaCungCapId")}})]}),Object(K.b)("div",{style:{marginTop:"10px"},children:Object(K.b)(V.a,{disabled:!v,type:"primary",onClick:function(){return C.apply(this,arguments)},children:"C\u1eadp nh\u1eadt nh\xe0 cung c\u1ea5p"})})]}),footer:Object(K.b)("div",{children:Object(K.b)(V.a,{icon:Object(K.b)(R.a,{}),onClick:function(){t(Object(T.b)({tagPageId:j.d.nguyenLieuModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},X=j.d.nguyenLieuModal;n.default=function(){var e,n,t=Object(b.b)(),i=Object(b.c)((function(e){return e.nguyenLieu})),d=i.tabsData,j=i.loading,f=i.pageSize,p=i.nguyenLieus,v=Object(b.c)((function(e){return e.danhSachGiaNL})).giaNguyenLieuTheoDiaDiemDatas,m=Object(b.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[X]})),E=Object(b.c)((function(e){return e.account})).accountData,F=null===E||void 0===E||null===(e=E.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit,M=Object(g.a)({Instance:L.a,onPending:I.e,addSelectedId:I.a});o.a.useEffect((function(){Object.values({}).forEach(function(){var e=Object(r.a)(u.a.mark((function e(n){var a,c,i,r,d,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,c=n.name,i=n.nhomNguyenLieu,r=n.vendorId,d=n.quantitative,["quanLyNguyenLieu","nguyenLieu","datas",a],o={id:a,tenNguyenLieu:c||"",nhomNguyenLieuId:i,nhaCungCapId:r,donViTinhId:"".concat(d).trim().toLowerCase()},e.next=5,t(Object(x.c)(o));case 5:return o=e.sent,e.next=8,t(Object(w.c)(o));case 8:return o=e.sent,e.next=11,t(Object(S.c)(o));case 11:o=e.sent;case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[p]);var V=o.a.useMemo((function(){return Object.values(p).reduce((function(e,n){var t=n.id,i=(null===v||void 0===v?void 0:v[t])||{},u=i.tenNhaCungCap,r=i.giaNguyenLieu,d=Object(c.a)(Object(c.a)({},n),{},{tenNhaCungCap:u,giaNguyenLieu:r});return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,d))}),{})}),[p,v]);return Object(K.c)("div",{className:"nguyenLieu-page",css:O.a,children:[Object(K.b)(h.b,{className:"tabs",options:d,activeKey:m?"aside":"",onTabClick:function(e){if("add"===e){if(!F)return Object(D.f)();var n=new L.a;t(Object(s.c)({modalId:X,data:n.initData}))}else"aside"===e?t(Object(T.b)({tagPageId:X})):"taiExcel"===e&&t(Object(l.b)({tableId:X,constants:y,fileSheet:"nguyenLieuSheet",fileName:"nguyenLieuName"}))}}),Object(K.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[m&&Object(K.b)(Q,{}),Object(K.b)("div",{className:"aside-main",children:Object(K.b)(C.a,{constants:y,actions:M,datas:V,loading:j,modalId:X,isEdit:F,isSelection:!0,pagination:!0,pageSize:f,onChange:function(e){t(Object(I.g)(e.pageSize))},onCallbackDataSource:function(e){return Object(k.orderBy)(e,["tenNhomNguyenLieu","tenNguyenLieu"])}})})]}),Object(K.b)(N.a,{})]})}}}]);