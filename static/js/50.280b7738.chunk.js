(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[50],{974:function(n,e,a){"use strict";a.r(e);var t=a(3),o=a.n(t),i=a(13),c=a(15),u=a(8),g=a(36),r=a(0),h=a.n(r),d=a(39),l=a.n(d),b=a(47),s=a(190),m=a(369),T=a(189),j=a(367),O=a(33),C=a(245),f=a(76),p=a(52),v=a(103),N=a(73),y=a(98),L=a(138),I=a(134),w={ghiChuTinhLuongThang:{id:"ghiChuTinhLuongThang",name:"Ghi ch\xfa",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"text-area"}},inputNumber:{id:"inputNumber",name:"Input number",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},time:{id:"time",name:"Time",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[O.a.stt,f.b.maNV,p.a.hoTen,I.a.tenBoPhan,Object(c.a)(Object(c.a)({},v.a.tenChucVu),{},{width:100}),N.a.tenCaLamViec,f.b.tiengLamViec,y.a.luongCoBan,y.a.luongTrachNhiem,y.a.luongChuyenCan,y.a.luongPhuCapDienThoaiChucVu,y.a.luongPhuCapDem,y.a.tongLuongThang,y.a.tongLuongNgayCB,L.a.tongCongNgayThuong,L.a.tongNgayHuongLeTet,L.a.tongCongNgayLeTet,L.a.tongCongNgay,L.a.tongGioTangCaThuong,L.a.tongGioTangCaNgayLe,L.a.tongCongTangCaNgay,y.a.luongNhanChuyenCan,y.a.luongNhanPhuCapDienThoaiChucVu,y.a.tongHoTroXang,y.a.luongNhanPhuCapDienThoaiChucVu,y.a.phuCapKhac,y.a.tongCongLuong,y.a.truDongPhucTheKhac,y.a.truBaoHiemXaHoi,y.a.tongLuongNhanThang,y.a.truTamUng,y.a.tongLuongThucNhan,this.ghiChuTinhLuongThang]},getInputFields:function(){return[y.a.phuCapKhac,y.a.truDongPhucTheKhac,y.a.truBaoHiemXaHoi,y.a.truTamUng]},getExcelFields:function(){return this.getTableColumns()}},k=a(368),x=a(357),P=a(244),D=a(413),M=a(60),V=a(488),S=a(69),H=a(481),F=a(12),B=a(385),G=a(14),E=O.b.tinhLuongThang,K=function(n){var e=n.modalId,a=Object(b.b)(),t=Object(b.c)((function(n){return n.form})),o=t.modal,i=t.datas,c=Object(b.c)((function(n){return n.hideColumns})),u=h.a.useMemo((function(){return e||E}),[e]),g=null===c||void 0===c?void 0:c[u],r=h.a.useMemo((function(){var n;return!!(null===o||void 0===o||null===(n=o[E])||void 0===n?void 0:n.open)}),[o[E]]);var d=h.a.useMemo((function(){return w.getTableColumns()}),[]);return Object(G.b)(F.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:r,onClose:function(){a(T.a({modalId:E}))},width:600,modalId:u,datas:i,children:Object(G.b)(H.b,{dataSource:d,renderItem:function(n){return Object(G.c)(H.b.Item,{className:(null===g||void 0===g?void 0:g[n.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){a(Object(B.b)({tableId:u,columnId:n.id}))},children:[Object(G.b)(H.b.Item.Meta,{title:n.name}),Object(G.b)("div",{children:n.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},R=function(n){var e,a=n.dateTimePicker,t=Object(b.b)(),o=Object(b.c)((function(n){return n.ngayNghiLeTet})).ngayNghiLeTetTrongThang;return Object(G.c)(G.a,{children:[Object(G.b)(j.a,{header:Object(G.b)("div",{className:"font-weight-bold",children:Object(G.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(G.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(G.b)("div",{children:(null===a||void 0===a||null===(e=a.getMonthRender)||void 0===e?void 0:e.call(a))||null}),Object(G.b)("div",{children:Object(G.b)(M.a,{type:"primary",icon:Object(G.b)(V.a,{}),onClick:function(){return t(Object(T.c)({modalId:O.b.tinhLuongThang}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})}),Object(G.c)("div",{style:{marginTop:"10px"},children:[Object(G.b)("div",{className:"font-weight-bold",children:"Ng\xe0y Ngh\u1ec9 L\u1ec5, T\u1ebft trong th\xe1ng:"}),o&&o.map((function(n){var e=n.id,a=n.ngay,t=n.tenNgay,o=n.mucNhan;return Object(G.c)("div",{children:[a,": ",t," x ",o]},e)}))]})]}),footer:Object(G.b)("div",{children:Object(G.b)(M.a,{icon:Object(G.b)(S.a,{}),onClick:function(){t(Object(m.b)({tagPageId:O.d.tinhLuongThangModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(G.b)(K,{modalId:O.d.tinhLuongThangModal})]})},X=a(57),Y=a(101),q=a(383),z=a(401),J=a(18),U=a(249),W=a(451),A=a(168);var Q=function(n){var e=n.record,a=n.selectedTime,t=Object(b.b)(),i=Object(A.useForm)(),r=Object(g.a)(i,1)[0];function d(){return(d=Object(u.a)(o.a.mark((function n(){var i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.validateFields();case 2:i=n.sent,t(Object(D.e)(a,Object(c.a)(Object(c.a)({},e),i)));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return h.a.useEffect((function(){r.setFieldsValue(e)}),[e]),Object(G.c)("div",{children:[Object(G.b)(F.MyForm,{labelCol:{span:4},wrapperCol:{span:18},options:Object(F.getFormItemFields)(w.getInputFields()),form:r}),Object(G.b)("div",{children:Object(G.b)(M.a,{type:"primary",onClick:function(){return d.apply(this,arguments)},children:"C\u1eadp nh\u1eadt"})})]})},Z=O.d.tinhLuongThangModal;e.default=function(){var n,e,a=Object(b.b)(),t=Object(b.c)((function(n){return n.time})).soNgayLamViecTrongThang,r=Object(b.c)((function(n){return n.ngayNghiLeTet})),d=r.soNgayNghiLeTetTrongThang,O=(r.ngayNghiLeTetTrongThang,Object(b.c)((function(n){return n.diemDanhThang})).tongHopDiemDanhThangs),f=Object(b.c)((function(n){return n.nhanSu})).nhanSusWorking,p=Object(b.c)((function(n){return n.salary})).salaries,v=Object(b.c)((function(n){return n.tinhLuongThang})),N=v.tabsData,y=v.loading,L=v.pageSize,I=v.tinhLuongThangs,M=Object(b.c)((function(n){var e;return null===(e=n.tagsPage)||void 0===e?void 0:e[Z]})),V=Object(b.c)((function(n){return n.account})).accountData,S=null===V||void 0===V||null===(n=V.paths)||void 0===n||null===(e=n.tinhLuongThang)||void 0===e?void 0:e.edit,H=Object(P.a)({Instance:x.a,onPending:D.d,addSelectedId:D.a}),F=Object(q.b)({defaultTime:l()("12/2021","MM/YYYY")}),B=Object(g.a)(F,2),E=B[0],K=B[1];function A(){return(A=Object(u.a)(o.a.mark((function n(e){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("add"!==e||!S){n.next=7;break}if(S){n.next=3;break}return n.abrupt("return",Object(X.f)());case 3:t=new x.a,a(Object(T.c)({modalId:Z,data:t.initData})),n.next=8;break;case 7:"aside"===e?a(Object(m.b)({tagPageId:Z})):"taiExcel"===e&&a(Object(s.b)({tableId:Z,constants:w,fileSheet:"tinhLuongThangSheet",fileName:"tinhLuongThangName"}));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}h.a.useEffect((function(){return a(Object(z.e)(E)),a(Object(U.d)(E)),a(Object(W.b)(E)),a(Object(D.c)(E)),function(){Object(J.h)("diemDanhThang"),Object(J.h)("tinhLuongThang")}}),[E]);var $=h.a.useMemo((function(){return Object.values(f).filter((function(n){return"quayCom"===n.boPhanId})).reduce((function(n,e){var a=e.id,o=(null===p||void 0===p?void 0:p[a])||{},u=o.luongChuyenCan,g=o.luongPhuCapDem,r=o.luongPhuCapDienThoaiChucVu,h=(null===I||void 0===I?void 0:I[a])||{},l=(null===O||void 0===O?void 0:O[a])||{},b=l.tongCongNgayThuong,s=void 0===b?0:b,m=l.tongGioTangCaThuong,T=void 0===m?0:m,j=l.tongCongNgayLeTet,C=void 0===j?0:j,f=l.tongGioTangCaNgayLe,v=void 0===f?0:f,N=l.tongCongNgay,y=void 0===N?0:N,L=l.tongHoTroXang,w=void 0===L?0:L,k=l.tongCongTangCaNgay,x=void 0===k?0:k,P=y>0?t/y:0,D=y>=t?u:0,M=y>=20?r:0,V=y>=t?g:Math.round((g||0)*P),S=Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{tongCongNgayThuong:s,tongCongNgayLeTet:C,tongCongNgay:y,tongGioTangCaThuong:T,tongGioTangCaNgayLe:v,tongCongTangCaNgay:x,tongHoTroXang:w,luongNhanChuyenCan:D,luongNhanPhuCapDienThoaiChucVu:M,luongNhanPhuCapDem:V,tongNgayHuongLeTet:d},h);return Object(c.a)(Object(c.a)({},n),{},Object(i.a)({},a,S))}),{})}),[f,p,O,d,t,I]);return Object(G.c)("div",{className:"tinhLuongThang-page",css:C.a,children:[Object(G.b)(j.b,{className:"tabs",options:N,activeKey:M?"aside":"",onTabClick:function(n){return A.apply(this,arguments)}}),Object(G.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[M&&Object(G.b)(R,{dateTimePicker:K}),Object(G.b)("div",{className:"aside-main",children:Object(G.b)(k.a,{isEdit:S,constants:w,actions:H,datas:$,loading:y,modalId:Z,expandable:{expandedRowRender:function(n){return Object(G.b)(Q,{selectedTime:E,record:n})},expandRowByClick:!1},isSelection:!0,pagination:!0,pageSize:L,onChange:function(n){a(Object(D.f)(n.pageSize))},onRow:function(n){return{onClick:function(){console.log(n)}}},onCallbackDataSource:function(n){return Object(Y.orderBy)(n,["tenCaLamViec","tenBoPhan","tenChucVu","maNV"])}})})]})]})}}}]);