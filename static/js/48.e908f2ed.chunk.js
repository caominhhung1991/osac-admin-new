(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[48],{1008:function(e,n,a){"use strict";a.r(n);var t=a(13),c=a(14),i=a(0),u=a.n(i),d=a(48),o=a(189),r=a(190),b=a(248),l=a(375),s=a(34),g=a(249),h=a(750),j=a(746),O=a(361),f=a(253),p={getTableColumns:function(){return[Object(c.a)(Object(c.a)({},s.a.stt),{},{fixed:!1}),O.a.tenNguyenLieu,Object(c.a)(Object(c.a)({},h.a.tenDonViTinh),{},{align:"center"}),f.a.tenNhomNguyenLieu,Object(c.a)(Object(c.a)({},j.a.tenNhaCungCap),{},{fixed:!1,name:"T\xean NCC \u0111\u1eb7t h\xe0ng",width:150}),Object(c.a)(Object(c.a)({},O.a.giaNguyenLieu),{},{name:"Gi\xe1 \u0111\u1eb7t h\xe0ng"}),s.a.active,s.a.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[s.a.id,O.a.tenNguyenLieu,h.a.tenDonViTinh,f.a.nhomNguyenLieuId,f.a.tenNhomNguyenLieu,j.a.nhaCungCapId,j.a.tenNhaCungCap,O.a.giaNguyenLieu]}},m=a(376),v=a(839),C=a(218),y=a(396),N=a(43),L=a(377),I=a(93),D=a(31),w=a(3),x=a.n(w),S=a(8),k=a(35),T=a(483),R=a(61),E=a(168),F=a(69),M=a(17),A=a(251),P=a(379),V=a(732),z=a(779),B=a(410),G=a(15),J=s.d.nguyenLieuModal,K=function(){var e,n,a=Object(d.b)(),t=Object(d.c)((function(e){return e.diaDiem})),c=t.diaDiemId,i=t.diaDiems,o=Object(d.c)((function(e){return e.nhaCungCap})),b=o.nhaCungCapId,g=o.nhaCungCaps,h=(Object(d.c)((function(e){return e.nguyenLieu})).nguyenLieus,Object(d.c)((function(e){return e.table})).selectedRows),j=Object(E.useForm)(),O=Object(k.a)(j,1)[0],f=u.a.useMemo((function(){return 0!==((null===h||void 0===h?void 0:h[J])||[]).length&&b}),[h,b]),p=Object(d.c)((function(e){return e.account})).accountData,m=null===p||void 0===p||null===(e=p.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit;function v(){return(v=Object(S.a)(x.a.mark((function e(){var n,t,u,d,o,l,s,j,O;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===i||void 0===i?void 0:i[c])||{},t=n.tenDiaDiem,u=(null===g||void 0===g?void 0:g[b])||{},d=u.tenNhaCungCap,m){e.next=4;break}return e.abrupt("return",Object(N.f)());case 4:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt c\xe1c nguy\xean li\xeau th\xe0nh nh\xe0 cung c\u1ea5p ".concat(d," \u0111ang \u0111\u1eb7t h\xe0ng t\u1ea1i \u0111\u1ecba \u0111i\u1ec3m ").concat(t))){e.next=6;break}return e.abrupt("return");case 6:Object(M.h)("giaNguyenLieuTheoDiaDiem"),o=(null===h||void 0===h?void 0:h[J])||[],l=Object(D.a)(o),e.prev=9,l.s();case 11:if((s=l.n()).done){e.next=20;break}return j=s.value,O={id:j.id,nhaCungCapId:b},e.next=16,a(Object(A.c)(O));case 16:O=e.sent,a(Object(B.g)(O,c));case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:a(Object(r.d)({tableId:J,selectedRowKeys:[],selectedRows:[]})),a(Object(B.d)(c)),Object(N.e)();case 31:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})))).apply(this,arguments)}return u.a.useEffect((function(){console.log(c,"diaDiemId"),a(Object(B.d)(c))}),[c]),u.a.useEffect((function(){var e=localStorage.getItem("nhaCungCapId")||"",n=localStorage.getItem("diaDiemId")||"";a(Object(A.a)(e)),a(Object(P.a)(n)),O.setFieldsValue({nhaCungCapId:e,diaDiemId:n})}),[]),Object(G.b)(G.a,{children:Object(G.b)(l.a,{header:Object(G.b)("div",{className:"font-weight-bold",children:Object(G.b)("span",{children:"Th\xf4ng Tin Trang"})}),body:Object(G.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(G.c)(T.a,{form:O,children:[Object(G.b)(V.a,{isDanhSachNL:!0,onAfterSelect:function(e){O.setFieldsValue({nhaCungCapId:""}),a(Object(A.a)(""))}}),Object(G.b)(z.a,{isAddNew:!0,isTrangQuanLy:!0,diaDiemId:c,onAfterSelect:function(e){console.log(e,"nhaCungCapId")}})]}),Object(G.b)("div",{style:{marginTop:"10px"},children:Object(G.b)(R.a,{disabled:!f,type:"primary",onClick:function(){return v.apply(this,arguments)},children:"C\u1eadp nh\u1eadt nh\xe0 cung c\u1ea5p"})}),false,false]}),footer:Object(G.b)("div",{children:Object(G.b)(R.a,{icon:Object(G.b)(F.a,{}),onClick:function(){a(Object(L.b)({tagPageId:s.d.nguyenLieuModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},Q=s.d.nguyenLieuModal;n.default=function(){var e,n,a=Object(d.b)(),i=Object(d.c)((function(e){return e.nguyenLieu})),s=i.tabsData,h=i.loading,j=i.pageSize,O=i.nguyenLieus,f=Object(d.c)((function(e){return e.danhSachGiaNL})).giaNguyenLieuTheoDiaDiemDatas,D=Object(d.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[Q]})),w=Object(d.c)((function(e){return e.account})).accountData,x=null===w||void 0===w||null===(e=w.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit,S=Object(b.a)({Instance:C.a,onPending:y.f,addSelectedId:y.a});var k=u.a.useMemo((function(){return Object.values(O).reduce((function(e,n){var a=n.id,i=(null===f||void 0===f?void 0:f[a])||{},u=i.tenNhaCungCap,d=i.nhaCungCapId,o=i.giaNguyenLieu,r=Object(c.a)(Object(c.a)({},n),{},{nhaCungCapId:d,tenNhaCungCap:u,giaNguyenLieu:o});return Object(c.a)(Object(c.a)({},e),{},Object(t.a)({},a,r))}),{})}),[O,f]);return Object(G.c)("div",{className:"nguyenLieu-page",css:g.a,children:[Object(G.b)(l.b,{className:"tabs",options:s,activeKey:D?"aside":"",onTabClick:function(e){if("add"===e){if(!x)return Object(N.f)();var n=new C.a;a(Object(o.c)({modalId:Q,data:n.initData}))}else"aside"===e?a(Object(L.b)({tagPageId:Q})):"taiExcel"===e&&a(Object(r.b)({tableId:Q,constants:p,fileSheet:"nguyenLieuSheet",fileName:"nguyenLieuName",isDownloadAll:!0,datas:k}))}}),Object(G.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[D&&Object(G.b)(K,{}),Object(G.b)("div",{className:"aside-main",children:Object(G.b)(m.a,{constants:p,actions:S,datas:k,loading:h,modalId:Q,isEdit:x,isSelection:!0,pagination:!0,pageSize:j,onChange:function(e){a(Object(y.j)(e.pageSize))},expandable:{expandedRowRender:function(e){return Object(G.b)("div",{children:e.id})},expandRowByClick:!0},onCallbackDataSource:function(e){return Object(I.orderBy)(e,["tenNhomNguyenLieu","tenNguyenLieu"])}})})]}),Object(G.b)(v.a,{})]})}}}]);