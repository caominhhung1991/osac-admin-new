(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[65],{1004:function(n,a,e){"use strict";e.r(a);var t=e(3),o=e.n(t),i=e(14),c=e(13),g=e(8),u=e(34),h=e(0),r=e.n(h),d=e(48),l=e(193),b=e(382),s=e(192),T=e(380),m=e(35),C=e(248),j=e(61),O=e(122),p=e(79),N=e(100),f=e(137),v={ghiChuTinhLuongThang:{id:"ghiChuTinhLuongThang",name:"Ghi ch\xfa",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"text-area"}},inputNumber:{id:"inputNumber",name:"Input number",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},time:{id:"time",name:"Time",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[m.a.stt,j.b.maNV,j.b.hoTen,Object(c.a)(Object(c.a)({},O.a.tenChucVu),{},{width:100}),j.b.ngayVaoLam,j.b.tiengLamViec,p.a.tenCaLamViec,N.a.luongCoBan,N.a.luongTrachNhiem,N.a.luongChuyenCan,N.a.luongPhuCapDienThoaiChucVu,N.a.luongPhuCapDem,N.a.tongLuongThang,N.a.tongLuongNgayCB,f.a.tongCongNgayThuong,f.a.tongNgayHuongLeTet,f.a.tongCongNgayLeTet,f.a.tongCongNgay,f.a.tongGioTangCaThuong,f.a.tongGioTangCaNgayLe,f.a.tongCongTangCaNgay,N.a.tongNhanLuongNgayThuong,N.a.tongNhanNgayNghiLeTet,N.a.tongNhanLuongNgayNghiLeTet,N.a.tongNhanLuongTangCaThuong,N.a.tongNhanLuongTangCaLeTet,N.a.luongNhanChuyenCan,N.a.luongNhanPhuCapDienThoaiChucVu,N.a.luongNhanPhuCapDem,N.a.tongHoTroXang,N.a.phuCapKhac,N.a.tongCongLuong,N.a.truDongPhucTheKhac,N.a.truBaoHiemXaHoi,N.a.tongLuongNhanThang,N.a.truTamUng,N.a.tongLuongThucNhan,this.ghiChuTinhLuongThang]},getInputFields:function(){return[N.a.phuCapKhac,N.a.truDongPhucTheKhac,N.a.truBaoHiemXaHoi,N.a.truTamUng,this.ghiChuTinhLuongThang]},getExcelFields:function(){return this.getTableColumns()}},y=e(381),L=e(370),w=e(247),I=e(422),x=e(60),k=e(506),D=e(70),P=e(499),M=e(10),V=e(391),H=e(15),S=m.b.tinhLuongThang,B=function(n){var a=n.modalId,e=Object(d.b)(),t=Object(d.c)((function(n){return n.form})),o=t.modal,i=t.datas,c=Object(d.c)((function(n){return n.hideColumns})),g=r.a.useMemo((function(){return a||S}),[a]),u=null===c||void 0===c?void 0:c[g],h=r.a.useMemo((function(){var n;return!!(null===o||void 0===o||null===(n=o[S])||void 0===n?void 0:n.open)}),[o[S]]);var l=r.a.useMemo((function(){return v.getTableColumns()}),[]);return Object(H.b)(M.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:h,onClose:function(){e(s.a({modalId:S}))},width:600,modalId:g,datas:i,children:Object(H.b)(P.b,{dataSource:l,renderItem:function(n){return Object(H.c)(P.b.Item,{className:(null===u||void 0===u?void 0:u[n.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){e(Object(V.b)({tableId:g,columnId:n.id}))},children:[Object(H.b)(P.b.Item.Meta,{title:n.name}),Object(H.b)("div",{children:n.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},F=function(n){var a,e=n.dateTimePicker,t=Object(d.b)(),o=Object(d.c)((function(n){return n.ngayNghiLeTet})).ngayNghiLeTetTrongThang,i=Object(d.c)((function(n){return n.time})).soNgayLamViecTrongThang;return Object(H.c)(H.a,{children:[Object(H.b)(T.a,{header:Object(H.b)("div",{className:"font-weight-bold",children:Object(H.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(H.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(H.b)("div",{children:(null===e||void 0===e||null===(a=e.getMonthRender)||void 0===a?void 0:a.call(e))||null}),Object(H.b)("div",{children:Object(H.b)(x.a,{type:"primary",icon:Object(H.b)(k.a,{}),onClick:function(){return t(Object(s.c)({modalId:m.b.tinhLuongThang}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})}),Object(H.b)("div",{style:{marginTop:"10px"},children:Object(H.c)("div",{className:"font-weight-bold",children:["S\u1ed1 ng\xe0y l\xe0m vi\u1ec7c trong th\xe1ng: ",i]})}),Object(H.c)("div",{style:{marginTop:"10px"},children:[Object(H.b)("div",{className:"font-weight-bold",children:"Ng\xe0y Ngh\u1ec9 L\u1ec5, T\u1ebft trong th\xe1ng:"}),o&&o.map((function(n){var a=n.id,e=n.ngay,t=n.tenNgay,o=n.mucNhan;return Object(H.c)("div",{children:[e,": ",t," x ",o]},a)}))]})]}),footer:Object(H.b)("div",{children:Object(H.b)(x.a,{icon:Object(H.b)(D.a,{}),onClick:function(){t(Object(b.b)({tagPageId:m.d.tinhLuongThangModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(H.b)(B,{modalId:m.d.tinhLuongThangModal})]})},K=e(43),G=e(93),X=e(385),E=e(410),R=e(17),U=e(256),q=e(463),z=e(168);var J=function(n){var a=n.record,e=n.selectedTime,t=Object(d.b)(),i=Object(z.useForm)(),h=Object(u.a)(i,1)[0];function l(){return(l=Object(g.a)(o.a.mark((function n(){var i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.validateFields();case 2:i=n.sent,t(Object(I.e)(e,Object(c.a)(Object(c.a)({},a),i)));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.useEffect((function(){h.setFieldsValue(a)}),[a]),Object(H.c)("div",{children:[Object(H.b)(M.MyForm,{labelCol:{span:4},wrapperCol:{span:18},options:Object(M.getFormItemFields)(v.getInputFields()),form:h}),Object(H.b)("div",{children:Object(H.b)(x.a,{type:"primary",onClick:function(){return l.apply(this,arguments)},children:"C\u1eadp nh\u1eadt"})})]})},W=m.d.tinhLuongThangModal;a.default=function(){var n,a,e=Object(d.b)(),t=Object(d.c)((function(n){return n.time})).soNgayLamViecTrongThang,h=Object(d.c)((function(n){return n.ngayNghiLeTet})).soNgayNghiLeTetTrongThang,m=Object(d.c)((function(n){return n.diemDanhThang})).tongHopDiemDanhThangs,j=Object(d.c)((function(n){return n.nhanSu})).nhanSusWorking,O=Object(d.c)((function(n){return n.salary})).salaries,p=Object(d.c)((function(n){return n.tinhLuongThang})),N=p.tabsData,f=p.loading,x=p.pageSize,k=p.tinhLuongThangs,D=Object(d.c)((function(n){var a;return null===(a=n.tagsPage)||void 0===a?void 0:a[W]})),P=Object(d.c)((function(n){return n.account})).accountData,M=null===P||void 0===P||null===(n=P.paths)||void 0===n||null===(a=n.tinhLuongThang)||void 0===a?void 0:a.edit,V=Object(w.a)({Instance:L.a,onPending:I.d,addSelectedId:I.a}),S=Object(X.b)({}),B=Object(u.a)(S,2),z=B[0],A=B[1];function Q(){return(Q=Object(g.a)(o.a.mark((function n(a){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("add"!==a||!M){n.next=7;break}if(M){n.next=3;break}return n.abrupt("return",Object(K.f)());case 3:t=new L.a,e(Object(s.c)({modalId:W,data:t.initData})),n.next=8;break;case 7:"aside"===a?e(Object(b.b)({tagPageId:W})):"taiExcel"===a&&e(Object(l.b)({tableId:W,constants:v,fileSheet:"tinhLuongThangSheet",fileName:"tinhLuongThangName"}));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}r.a.useEffect((function(){return e(Object(E.e)(z)),e(Object(U.d)(z)),e(Object(q.b)(z)),e(Object(I.c)(z)),function(){Object(R.h)("diemDanhThang"),Object(R.h)("tinhLuongThang")}}),[z]);var Y=r.a.useMemo((function(){return Object.values(j).filter((function(n){return"quayCom"===n.boPhanId})).reduce((function(n,a){var e=a.id,o=(a.hoTen,a.tiengLamViec),g=void 0===o?0:o,u=(null===O||void 0===O?void 0:O[e])||{},r=u.luongChuyenCan,d=u.luongPhuCapDem,l=u.luongPhuCapDienThoaiChucVu,b=u.tongLuongNgayCB,s=void 0===b?0:b,T=g?s/g:0,C=(null===k||void 0===k?void 0:k[e])||{},j=C.phuCapKhac,p=void 0===j?0:j,N=C.truDongPhucTheKhac,f=void 0===N?0:N,v=C.truBaoHiemXaHoi,y=void 0===v?0:v,L=C.truTamUng,w=void 0===L?0:L,I=C.ghiChuTinhLuongThang,x=void 0===I?"":I,D=(null===m||void 0===m?void 0:m[e])||{},P=D.tongCongNgayThuong,M=void 0===P?0:P,V=D.tongGioTangCaThuong,H=void 0===V?0:V,S=D.tongCongNgayLeTet,B=void 0===S?0:S,F=D.tongGioTangCaNgayLe,K=void 0===F?0:F,G=D.tongCongNgay,X=void 0===G?0:G,E=D.tongHoTroXang,R=void 0===E?0:E,U=D.tongCongTangCaNgay,q=void 0===U?0:U,z=Math.round(M*s),J=Math.round((h||0)*s),W=Math.round(B*s),A=Math.round(T*H),Q=Math.round(T*K),Y=X>0?t/X:0,Z=X>=t?r:0,$=X>=20?l:0,_=t>=X?d:Math.round((d||0)*Y),nn=z+J+W+Z+$+_+A+Q+p,an=nn-f-y,en=an-w,tn=Object(c.a)(Object(c.a)(Object(c.a)({},a),u),{},{luongTiengLamViec:T,tongCongNgayThuong:M,tongCongNgayLeTet:B,tongCongNgay:X,tongGioTangCaThuong:H,tongGioTangCaNgayLe:K,tongCongTangCaNgay:q,tongHoTroXang:R,tongNhanLuongNgayThuong:z,tongNhanNgayNghiLeTet:J,tongNhanLuongNgayNghiLeTet:W,tongNhanLuongTangCaThuong:A,tongNhanLuongTangCaLeTet:Q,luongNhanChuyenCan:Z,luongNhanPhuCapDienThoaiChucVu:$,luongNhanPhuCapDem:_,phuCapKhac:p,tongCongLuong:nn,tongNgayHuongLeTet:h,truDongPhucTheKhac:f,truBaoHiemXaHoi:y,truTamUng:w,ghiChuTinhLuongThang:x,tongLuongNhanThang:an,tongLuongThucNhan:en});return Object(c.a)(Object(c.a)({},n),{},Object(i.a)({},e,tn))}),{})}),[j,O,m,h,t,k]);return Object(H.c)("div",{className:"tinhLuongThang-page",css:C.a,children:[Object(H.b)(T.b,{className:"tabs",options:N,activeKey:D?"aside":"",onTabClick:function(n){return Q.apply(this,arguments)}}),Object(H.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[D&&Object(H.b)(F,{dateTimePicker:A}),Object(H.b)("div",{className:"aside-main",children:Object(H.b)(y.a,{isEdit:M,constants:v,actions:V,datas:Y,loading:f,modalId:W,expandable:{expandedRowRender:function(n){return Object(H.b)(J,{selectedTime:z,record:n})},expandRowByClick:!1},isSelection:!0,pagination:!0,pageSize:x,onChange:function(n){e(Object(I.f)(n.pageSize))},onRow:function(n){return{onClick:function(){console.log(n)}}},onCallbackDataSource:function(n){return Object(G.orderBy)(n,["tenCaLamViec","tenBoPhan","tenChucVu","maNV"])}})})]})]})}}}]);